# تمدید آگهی

این API برای تمدید آگهی استفاده می‌شود که دوره نمایش آن را تمدید می‌کند. با استفاده از این سرویس می‌توانید مدت زمان نمایش آگهی را افزایش دهید.

## دسترسی‌های مورد نیاز

برای استفاده از این API نیاز به دسترسی‌های زیر دارید:
- دسترسی OAuth: `PAYMENT_ALL_POSTS_RENEW`
- دسترسی API Key: `POST_RENEW`

## تمدید آگهی

```http request
POST https://open-api.divar.ir/experimental/open-platform/post/{{post_token}}/renew
Content-Type: application/json
x-api-key: {{apikey}}
Authorization: Bearer {{access_token}}

{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "extra_details": "Details for tracking purposes"
}
```

## پارامترهای درخواست

|    پارامتر     |  نوع   | اجباری |                                                                                                                                                                                                                                                       توضیحات |
|:--------------:|:------:|:-------:|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
|  `post_token`  | string |   بله   |                                                                                                                                                                               شناسه منحصر به فرد آگهی که ۸ تا ۹ کاراکتر است |
|      `id`      | string |   بله   | یک UUID نسخه ۴ که باید برای هر پرداخت منحصر به فرد باشد. این uuid باید از سمت شما تولید شده و در درخواست ارسال شود. اگر id ای ارسال شود که تراکنش موفق یا نیمه موفقی در سمت کنار داشته باشد، خطا دریافت خواهید کرد |
| `extra_details` | string |  خیر   |                                                                                                                     جزئیات اضافی که می‌خواهید به سمت کنار ارسال کنید. این فیلد اختیاری است و می‌تواند برای حل ناسازگاری‌های تراکنش استفاده شود |

## پاسخ

```json
{
    "transaction": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "app_slug": "my-app",
        "cost_rials": "350000",
        "created_at": "2023-10-20T10:30:00Z",
        "extra_details": "Details for tracking purposes",
        "state": "TRANSACTION_STATE_COMPLETED",
        "type": "TRANSACTION_TYPE_RENEW"
    }
}
```

## پارامترهای پاسخ

### شیء Transaction

|     پارامتر     |    نوع    |                                     توضیحات |
|:---------------:|:---------:|--------------------------------------------:|
|      `id`       |  string   |        همان uuid که در درخواست ارسال شده |
|   `app_slug`    |  string   |        شناسه اپلیکیشنی که تراکنش را ایجاد کرده است |
|  `cost_rials`   |   int64   |      هزینه تراکنش به ریال برای برنامه‌ی شما |
| `created_at`   | Timestamp |                           زمان ایجاد تراکنش |
| `extra_details` |  string   | همان جزئیات اضافی که در درخواست ارسال کردید |
|     `state`     |   State   |                                وضعیت تراکنش |
|     `type`      |   Type    |                                  نوع تراکنش (TRANSACTION_TYPE_RENEW) |

## نکات مهم

- قبل از استفاده از این API، حتماً از API قیمت‌گذاری آگهی برای دریافت هزینه و فراهم بودن امکان تمدید آگهی استفاده کنید
- هر UUID فقط یک بار قابل استفاده است
- در صورت موفقیت، دوره نمایش آگهی تمدید خواهد شد
- هزینه از موجودی برنامه‌ی شما کسر خواهد شد
- تمدید فقط در زمان نزدیک به انقضاء ممکن است
