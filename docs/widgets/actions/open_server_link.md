# Open Server Link 
این اکشن به صورت یک فیلد در کنار دیتای ویجت قرار می‌گیرد:
```json
{
  "action": {
    "open_server_link": {
      "data": {
        "your_key_1": "your value",
        "your_key_2": "your value"
      }
    }
  }
}
```

پس از کلیک کاربر بر روی ویجتی که این اکشن را داشته باشد، ابتدا یک درخواست از سمت
دیوار به برنامه‌ی شما برای دریافت آدرس هدایت کاربر ارسال می‌شود.
شما در جواب این درخواست باید آدرسی که کاربر باید به آن هدایت شود را برگردانید.

درخواست دریافت آدرس هدایت کاربر به صورت زیر است:
```http request
POST {{YOUR_INIT_URL}}
Content-Type: application/json
Authorization: {{YOUR_DIVAR_AUTH_HEADER}}
API_VERSION: 2

{
  "return_url": "https://divar.ir/"
  "source": "POST_ADDON",
  "post_token": "wZC44q5D",
  "conversation_id": "6b3d5cf7-9291-4fa9-892a-9d07e300daea",
  "user_side": "Supply",
  "extra_data": {
    "your_key_1": "your value",
    "your_key_2": "your value"
  },
  user_id: "6GqmD76dle5NpJySqnBX8seTpt6uVtzqaNTNJU1ettI="
}
```

آدرسی که درخواست به آن زده می‌شود را می‌توانید در پنل کنار دیوار، با عنوان `لینک درخواست دیوار برای گرفتن آدرس شروع` تنظیم کنید.



| نام فیلد        |        نوع        | حداکثر طول |                                                                     توضیحات |
|:----------------|:-----------------:|:----------:|----------------------------------------------------------------------------:|
| return_url      |      String       |    2048    |                         آدرسی که کاربر پس از اتمام فراید باید به آن بازگردد |
| source          |      String       |     20     |                         محلی که کاربر از آن به سمت برنامه شما هدایت شده است |
| post_token      | String (Nullable) |     10     |                                                     توکن پست (در صورت وجود) |
| conversation_id | String (Nullable) |     64     |                                            شناسه مرتبط با چت (در صورت وجود) |
| user_side       | String (Nullable) |     50     |                                               نوع کاربر (خریدار یا فروشنده) |
| extra_data      |       JSON        |    N/A     |            داده‌های اضافی که از سمت برنامه‌ی شما در کلید data قرار داده شده |
| user_id         | String (Nullable) |     64     | شناسه‌ی کاربر که به بر روی دکمه کلیک کرده است (در صورت لاگین بودن در دیوار) |


انتظار می‌رود که در پاسخ به این درخواست، پاسخ موفق با کد وضعیت ۲۰۰ برگردانده شود
و بدنه‌ی پاسخ به صورت زیر باشد:
```json
{
  "url": "https://your-domain.com/landings/6b3d5cf7-9291-4fa9-892a-9d07e300daea"
}
```


### مقادیر ممکن برای فیلد source 

| Source                |                فیلد‌های موجود                 |                                     توضیحات |                                                          
|:----------------------|:---------------------------------------------:|--------------------------------------------:|
| `POST_ADODN`          | `post_token`, `conversation_id`, `user_side`  | کاربر بر روی یک افزونه‌ی آگهی کلیک کرده است |
| `CHAT_MESSAGE_ACTION` | `post_token`, `conversation_id`,  `user_side` |    کاربر بر روی یک دکمه در چت کلیک کرده است |

در صورتی که کاربر از کلاینت وب استفاده می‌کند، فرد به تب
دیگری با آدرس مشخص شده ریدایرکت می‌شود و 
اگر کاربر از کلاینت اندروید و iOS استفاده کند، 
داخل اپلیکیشن یک صفحه‌ی وب با آدرس ذکر شده باز می‌شود. 

