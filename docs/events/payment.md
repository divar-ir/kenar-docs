# رویداد تراکنش پرداخت {#payment-transaction-event}

این سند ساختار رویدادهای تراکنش پرداخت را که می‌توانید از طریق سیستم رویدادها دریافت کنید، توضیح می‌دهد.
**توجه کنید که این امکان در لحظه به صورت ازمایشی است و ممکن است در آینده دسخوش تغییر بوشد.**

## تراکنش {#transaction}

| فیلد            | نوع    | توضیحات                                                                                     |
|-----------------|--------|---------------------------------------------------------------------------------------------|
| `id`            | string | شناسه یکتای تراکنش. این همان UUID است که هنگام ایجاد تراکنش استفاده شده است.                |
| `cost_rials`    | int64  | هزینه تراکنش به ریال برای برنامه‌ی شما.                                                     |
| `extra_details` | string | جزئیات اضافی که در درخواست اصلی تراکنش ارسال شده است.                                       |
| `state`         | enum   | وضعیت فعلی تراکنش. برای مقادیر ممکن به [وضعیت‌های تراکنش](#transaction-states) مراجعه کنید. |
| `type`          | enum   | نوع تراکنش. برای مقادیر ممکن به [انواع تراکنش](#transaction-types) مراجعه کنید.             |

### وضعیت‌های تراکنش {#transaction-states}

| وضعیت                         | مقدار | توضیحات                        |
|-------------------------------|-------|--------------------------------|
| `TRANSACTION_STATE_PENDING`   | 1     | تراکنش در انتظار تکمیل است     |
| `TRANSACTION_STATE_COMPLETED` | 2     | تراکنش با موفقیت انجام شده است |
| `TRANSACTION_STATE_FAILED`    | 3     | تراکنش با شکست مواجه شده است   |
| `TRANSACTION_STATE_REFUNDED`  | 4     | تراکنش بازپرداخت شده است       |

### انواع تراکنش {#transaction-types}

| نوع                        | مقدار | توضیحات                 |
|----------------------------|-------|-------------------------|
| `TRANSACTION_TYPE_REORDER` | 1     | تراکنش برای بازنشر آگهی |

## نمونه رویداد {#example-event}

در اینجا یک نمونه از رویداد تراکنش پرداخت آورده شده است:

```json
{
    "type": "PAYMENT_TRANSACTION",
    "payment_transaction": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "cost_rials": 100000,
        "extra_details": "توکن آگهی بازنشر: ABC123",
        "state": "TRANSACTION_STATE_COMPLETED",
        "type": "TRANSACTION_TYPE_REORDER"
    },
    "metadata": {
        "key": "value"
    }
}
```

## دریافت رویدادهای پرداخت {#receiving-payment-events}

برای دریافت رویدادهای تراکنش پرداخت، شما باید یک آدرس وب‌هوک معتبر در تنظیمات برنامه‌ی خود پیکربندی کرده باشید.
این رویداد بدون نیاز به انجام کار اضافه‌ای هر زمان که تغییری در وضعیت تراکنش رخ دهد، به آدرس وب‌هوک شما ارسال خواهند شد.

