<!doctype html>
<html lang="fa-IR" dir="rtl" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-events/ReadMe" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">دریافت رویدادها در لحظه | کنار دیوار</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://divar-ir.github.io/kenar-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://divar-ir.github.io/kenar-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://divar-ir.github.io/kenar-docs/events/"><meta data-rh="true" property="og:locale" content="fa_IR"><meta data-rh="true" name="docusaurus_locale" content="fa-IR"><meta data-rh="true" name="docsearch:language" content="fa-IR"><meta data-rh="true" name="title" content="کنار دیوار"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="دریافت رویدادها در لحظه | کنار دیوار"><meta data-rh="true" name="description" content="برای مطلع شدن در لحظه از اتفاقاتی که در دیوار رخ می‌دهد می‌توانید از این سرویس"><meta data-rh="true" property="og:description" content="برای مطلع شدن در لحظه از اتفاقاتی که در دیوار رخ می‌دهد می‌توانید از این سرویس"><link data-rh="true" rel="icon" href="/kenar-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://divar-ir.github.io/kenar-docs/events/"><link data-rh="true" rel="alternate" href="https://divar-ir.github.io/kenar-docs/events/" hreflang="fa-IR"><link data-rh="true" rel="alternate" href="https://divar-ir.github.io/kenar-docs/events/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://V8S0FQWY9Z-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="کنار دیوار" href="/kenar-docs/opensearch.xml"><link rel="stylesheet" href="/kenar-docs/assets/css/styles.289436a1.css">
<script src="/kenar-docs/assets/js/runtime~main.e950bdfb.js" defer="defer"></script>
<script src="/kenar-docs/assets/js/main.9d07451a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/kenar-docs/img/logo.svg"><div role="region" aria-label="پرش به مطلب اصلی"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">پرش به مطلب اصلی</a></div><nav aria-label="صفحه اصلی" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="باز و بست منو" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kenar-docs/"><div class="navbar__logo"><img src="/kenar-docs/img/logo.svg" alt="کنار دیوار" class="themedComponent_mlkZ themedComponent--light_NVdE" width="64"><img src="/kenar-docs/img/logo.svg" alt="کنار دیوار" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="64"></div><b class="navbar__title text--truncate">| مستندات فنی</b></a><a href="https://github.com/divar-ir/kenar-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="بین حالت تاریک و روشن سوئیچ کنید (الان حالت روشن)" aria-label="بین حالت تاریک و روشن سوئیچ کنید (الان حالت روشن)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="جستجو (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">جستجو</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="بازگشت به بالا" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="نوار کناری مستندات" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kenar-docs/">ReadMe</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/addons/">افزونه‌های صفحهٔ آگهی</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;افزونه‌های صفحهٔ آگهی&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kenar-docs/assets/">اَسِت‌ها assets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/chat/">💬 افزونه‌های چت دیوار</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;💬 افزونه‌های چت دیوار&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" href="/kenar-docs/events/">دریافت رویدادها در لحظه</a><button aria-label="بستن دسته بندی در نوار کناری &#x27;دریافت رویدادها در لحظه&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kenar-docs/events/auth">حذف دسترسی توسط کاربر</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kenar-docs/events/chat">پیام‌های چت</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kenar-docs/events/post">آگهی</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/finder/">دریافت اطلاعات آگهی</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;دریافت اطلاعات آگهی&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/management/">پنل مدیریت اپلیکیشن‌ها</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;پنل مدیریت اپلیکیشن‌ها&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kenar-docs/migrations/user_addon_v2+addon_v2+user_semantic">migrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/misc/">متفرقه</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;متفرقه&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/oauth/">احراز باز</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;احراز باز&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/payment-ticket/">فلوی تیکت پرداخت</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;فلوی تیکت پرداخت&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kenar-docs/post/edit_post">post</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/semantic/">اطلاعات معنایی</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;اطلاعات معنایی&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/standards/">استانداردها</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;استانداردها&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kenar-docs/widgets/">ساختار ویجت های دیوار (Widgets)</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;ساختار ویجت های دیوار (Widgets)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="نشانگر صفحات"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="صفحه اصلی" class="breadcrumbs__link" href="/kenar-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">دریافت رویدادها در لحظه</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">مطالب این صفحه</button></div><div class="theme-doc-markdown markdown"><header><h1>دریافت رویدادها در لحظه</h1></header>
<p>برای مطلع شدن در لحظه از اتفاقاتی که در دیوار رخ می‌دهد می‌توانید از این سرویس
استفاده کنید. دقت کنید که سرویس، نسخه‌ی آزمایشی هست و ممکن است در آینده دچار تغییرات
Backward incompatible
شود.</p>
<p>برای مطلع شدن از یک رویداد، ابتدا باید درخواستی برای گوش دادن به آن ارسال کنید.
در صورت موفق بودن این درخواست، تا زمان معتبر بودن دسترسی شما به آن رویداد، هر زمانی که
آن رویداد رخ دهد، کنار برنامه‌ی شما را از طریق یک درخواست HTTP (Webhook) مطلع می‌کند.</p>
<p>دقت کنید که برای دریافت رویدادها باید برای برنامه‌ی خود یک آدرس دریافت رویداد‌های معتبر
ست کنید.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="درخواست-گوش-دادن-به-یک-رویداد">درخواست گوش دادن به یک رویداد<a href="#درخواست-گوش-دادن-به-یک-رویداد" class="hash-link" aria-label="لینک مستقیم به درخواست گوش دادن به یک رویداد" title="لینک مستقیم به درخواست گوش دادن به یک رویداد">​</a></h2>
<p>برای ارسال این درخواست برنامه‌ی شما باید دسترسی <code>EVENTS_REGISTER_SUBSCRIPTION</code> را داشته باشد.
دقت کنید که این یک دسترسی OAuth نیست، بلکه این دسترسی بر روی کلید API شما تعریف می‌شود.</p>
<p>همچنین برای گوش دادن به هر نوع رویداد، دسترسی Oauth متناظر با آن نیز باید در توکن همراه درخواست گوش دادن به آن وجود
داشته باشد.</p>
<p>در صورت موفق بودن این درخواست، شما تا زمان معتبر بودن توکن تان از رویداد‌های درخواستی مطلع خواهید شد.
در صورتی که نیاز به refresh کردن توکن دارید، باید پس از دریافت توکن جدید، درخواستی برای ساختن مجدد subscription تان بزنید.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="انواع-رویدادها">انواع رویداد‌ها<a href="#انواع-رویدادها" class="hash-link" aria-label="لینک مستقیم به انواع رویداد‌ها" title="لینک مستقیم به انواع رویداد‌ها">​</a></h2>
<table><thead><tr><th style="text-align:center">نوع رویداد</th><th style="text-align:center">دسترسی Oauth متناظر</th><th style="text-align:right">توضیحات</th></tr></thead><tbody><tr><td style="text-align:center">NEW_MESSAGE_ON_POST</td><td style="text-align:center"><code>CHAT_POST_CONVERSATIONS_READ.{{post_token}}</code></td><td style="text-align:right">مطلع شدن از پیام‌های جدید بر روی چت <strong>یک</strong> آگهی. فقط برای آگهی گذار</td></tr><tr><td style="text-align:center">NEW_MESSAGE_ON_POST</td><td style="text-align:center"><code>CHAT_SUPPLIER_ALL_CONVERSATIONS_READ</code></td><td style="text-align:right">مطلع شدن از پیام‌های جدید بر روی تمام چت‌های تمام آگهی‌های یک فرد. <strong>فقط برای چت های مربوط به آگهی گذار</strong></td></tr><tr><td style="text-align:center">NEW_CHATBOT_MESSAGE</td><td style="text-align:center">-</td><td style="text-align:right">مطلع شدن از پیام جدید کاربران به چت بات</td></tr><tr><td style="text-align:center">USER_ACCESS_REVOCATION</td><td style="text-align:center"><code>NOTIFICATION_ACCESS_REVOCATION</code> و <code>USER_ID</code></td><td style="text-align:right">مطلع شدن از حذف شدن دسترسی‌های برنامه توسط کاربر</td></tr><tr><td style="text-align:center">POST_UPDATE</td><td style="text-align:center"><code>USER_POSTS_GET</code></td><td style="text-align:right">مطلع شدن از تغییرات آگهی‌ منتشر شده و آگهی در جریان</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="درخواست">درخواست<a href="#درخواست" class="hash-link" aria-label="لینک مستقیم به درخواست" title="لینک مستقیم به درخواست">​</a></h2>
<table><thead><tr><th style="text-align:center">پارامتر</th><th style="text-align:center">نوع</th><th style="text-align:right">توضیحات</th></tr></thead><tbody><tr><td style="text-align:center"><code>event_type</code></td><td style="text-align:center">string</td><td style="text-align:right">یک نوع <a href="#%D8%A7%D9%86%D9%88%D8%A7%D8%B9-%D8%B1%D9%88%DB%8C%D8%AF%D8%A7%D8%AF%D9%87%D8%A7">رویداد معتبر</a>. برای مثال <code>NEW_MESSAGE_ON_POST</code></td></tr><tr><td style="text-align:center"><code>event_resource_id</code></td><td style="text-align:center">string</td><td style="text-align:right">شناسهٔ چیزی که می خواهید از رویداد آن باخبر شوید و نوعش رو در بالا گفتید. اگر ارسال نشود همهٔ موارد در نظر گرفته می شود. مثلاً می توانید با ارسال توکن آگهی پیام های جدید یک آگهی را دریافت کنید و بدون ارسال آن پیام های جدید همهٔ آگهی را دریافت می کنید.</td></tr></tbody></table>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.divar.ir/v1/open-platform/events/subscriptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token header header-name keyword" style="color:#00009f">Content-Type</span><span class="token header punctuation" style="color:#393A34">:</span><span class="token header"> </span><span class="token header header-value">application/json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token header header-name keyword" style="color:#00009f">x-api-key</span><span class="token header punctuation" style="color:#393A34">:</span><span class="token header"> </span><span class="token header header-value">{{apikey}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token header header-name keyword" style="color:#00009f">x-access-token</span><span class="token header punctuation" style="color:#393A34">:</span><span class="token header"> </span><span class="token header header-value">{{access_token}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json"></span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;event_type&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;NEW_MESSAGE_ON_POST&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;event_resource_id&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;gZd7omnS&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;metadata&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;key&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;value&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json punctuation" style="color:#393A34">}</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json"></span><span class="token application-json punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="کپی به کلیپ‌بورد" title="کپی" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="درخواست-ارسالی-از-سمت-کنار-دیوار">درخواست ارسالی از سمت کنار دیوار<a href="#درخواست-ارسالی-از-سمت-کنار-دیوار" class="hash-link" aria-label="لینک مستقیم به درخواست ارسالی از سمت کنار دیوار" title="لینک مستقیم به درخواست ارسالی از سمت کنار دیوار">​</a></h2>
<p>پس از هر رویدادی که برنامه‌ی شما به آن گوش‌ می‌دهد، درخواستی از سمت کنار دیوار برای
برنامه‌ی شما به آدرس دریافت رویدادی‌های جدید که در پنل کنار ست کردید، فرستاده می‌شود.
شما باید ابتدا با چک کردن هدر <code>Authorization</code> اصالت این درخواست را بررسی کنید. مقدار
این هدر برابر با همان مقداری است که برای هدر شناسایی ریکوئست‌های دیوار در پنل ست کرده‌اید.</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://{{new_events_url}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token header header-name keyword" style="color:#00009f">Authorization</span><span class="token header punctuation" style="color:#393A34">:</span><span class="token header"> </span><span class="token header header-value">{{identification_key}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token header header-name keyword" style="color:#00009f">Content-Type</span><span class="token header punctuation" style="color:#393A34">:</span><span class="token header"> </span><span class="token header header-value">application/json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json"></span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;type&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;NEW_MESSAGE&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;metadata&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;key&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;value&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json punctuation" style="color:#393A34">}</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json property" style="color:#36acaa">&quot;new_message&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;id&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;e7a08a2c-8ee4-11ef-af85-4e9e9bfa3c12&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;conversation&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">            </span><span class="token application-json property" style="color:#36acaa">&quot;id&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;edbb9499-cccc-4d35-b21f-621fa95f2b3e&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">            </span><span class="token application-json property" style="color:#36acaa">&quot;type&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;POST&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">            </span><span class="token application-json property" style="color:#36acaa">&quot;post_token&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;gZd7omnS&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:#393A34">}</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;sender&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:#393A34">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">            </span><span class="token application-json property" style="color:#36acaa">&quot;side&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;SELLER&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">            </span><span class="token application-json property" style="color:#36acaa">&quot;type&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;BOT&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:#393A34">}</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;type&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;TEXT&quot;</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;sent_at&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json number" style="color:#36acaa">1729429926140000</span><span class="token application-json punctuation" style="color:#393A34">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">        </span><span class="token application-json property" style="color:#36acaa">&quot;text&quot;</span><span class="token application-json operator" style="color:#393A34">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:#e3116c">&quot;Hello!&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json">    </span><span class="token application-json punctuation" style="color:#393A34">}</span><span class="token application-json"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token application-json"></span><span class="token application-json punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="کپی به کلیپ‌بورد" title="کپی" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="درخواست-رویداد-جدید-ارسالی-از-سمت-دیوار">درخواست رویداد جدید (ارسالی از سمت دیوار)<a href="#درخواست-رویداد-جدید-ارسالی-از-سمت-دیوار" class="hash-link" aria-label="لینک مستقیم به درخواست رویداد جدید (ارسالی از سمت دیوار)" title="لینک مستقیم به درخواست رویداد جدید (ارسالی از سمت دیوار)">​</a></h2>
<table><thead><tr><th style="text-align:center">پارامتر</th><th style="text-align:center">نوع</th><th style="text-align:right">توضیحات</th></tr></thead><tbody><tr><td style="text-align:center"><code>type</code></td><td style="text-align:center"><a href="#%D8%B1%D9%88%DB%8C%D8%AF%D8%A7%D8%AF%D9%87%D8%A7">EventType</a></td><td style="text-align:right">نوع رویداد، برای مثال <code>NEW_MESSAGE</code></td></tr><tr><td style="text-align:center"><code>new_message</code></td><td style="text-align:center">Optional[<a href="/kenar-docs/events/chat#chat-message">ChatMessage</a>]</td><td style="text-align:right">پیام جدید. در صورتی که نوع رویداد <code>NEW_MESSAGE</code> باشد</td></tr><tr><td style="text-align:center"><code>new_chatbot_message</code></td><td style="text-align:center">Optional[<a href="/kenar-docs/events/chat#chat-message">ChatMessage</a>]</td><td style="text-align:right">پیام جدید. در صورتی که نوع رویداد <code>NEW_CHATBOT_MESSAGE</code> باشد</td></tr><tr><td style="text-align:center"><code>user_access_revocation</code></td><td style="text-align:center">Optional[<a href="/kenar-docs/events/auth#user-access-revocation">UserAccessRevocation</a>]</td><td style="text-align:right">حذف دسترسی برنامه توسط کاربر. در صورتی که نوع رویداد <code>USER_ACCESS_REVOCATION</code> باشد</td></tr><tr><td style="text-align:center"><code>post_update</code></td><td style="text-align:center">Optional[<a href="/kenar-docs/events/post#post-update">PostUpdate</a>]</td><td style="text-align:right">تغییر آگهی منتشر شده یا در جریان. در صورتی که نوع رویداد <code>POST_UPDATE</code> باشد</td></tr><tr><td style="text-align:center"><code>metadata</code></td><td style="text-align:center">Optional[Object]</td><td style="text-align:right">دیتای دلخواه از سمت برنامه‌ی شما.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="رویدادها">رویدادها<a href="#رویدادها" class="hash-link" aria-label="لینک مستقیم به رویدادها" title="لینک مستقیم به رویدادها">​</a></h3>
<table><thead><tr><th style="text-align:center">رویداد</th><th style="text-align:right">توضیحات</th></tr></thead><tbody><tr><td style="text-align:center"><code>NEW_MESSAGE</code></td><td style="text-align:right">پیام جدید در چت</td></tr><tr><td style="text-align:center"><code>NEW_CHATBOT_MESSAGE</code></td><td style="text-align:right">پیام جدید در چت بات</td></tr><tr><td style="text-align:center"><code>USER_ACCESS_REVOCATION</code></td><td style="text-align:right">حذف دسترسی برنامه توسط کاربر</td></tr><tr><td style="text-align:center"><code>POST_UPDATE</code></td><td style="text-align:right">تغییر آگهی</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/divar-ir/kenar-docs/tree/master/docs/docs/events/ReadMe.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ویرایش مطالب این صفحه</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="صفحات مستندات"><a class="pagination-nav__link pagination-nav__link--prev" href="/kenar-docs/chat/users_conversations"><div class="pagination-nav__sublabel">قبلی</div><div class="pagination-nav__label">ارسال پیام در چت</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kenar-docs/events/auth"><div class="pagination-nav__sublabel">بعدی</div><div class="pagination-nav__label">حذف دسترسی توسط کاربر</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#درخواست-گوش-دادن-به-یک-رویداد" class="table-of-contents__link toc-highlight">درخواست گوش دادن به یک رویداد</a></li><li><a href="#انواع-رویدادها" class="table-of-contents__link toc-highlight">انواع رویداد‌ها</a></li><li><a href="#درخواست" class="table-of-contents__link toc-highlight">درخواست</a></li><li><a href="#درخواست-ارسالی-از-سمت-کنار-دیوار" class="table-of-contents__link toc-highlight">درخواست ارسالی از سمت کنار دیوار</a></li><li><a href="#درخواست-رویداد-جدید-ارسالی-از-سمت-دیوار" class="table-of-contents__link toc-highlight">درخواست رویداد جدید (ارسالی از سمت دیوار)</a><ul><li><a href="#رویدادها" class="table-of-contents__link toc-highlight">رویدادها</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">2025 © <a href="https://divar.ir/kenar" target="_blank">کنار دیوار</a></div></div></div></footer></div>
</body>
</html>