<div align="right">

<img src="logo-dark.svg#gh-dark-mode-only" height="64px"/>
<img src="logo-light.svg#gh-light-mode-only" height="64px"/>

</div>

<br>

 **کنار دیوار**
 بستریست برای افزودن اطلاعات و خدمات به دیوار.
 با ارائه‌ی خدمات خود در **کنار دیوار**، شما می‌توانید به کاربران دیوار کمک کنید تجربه‌ی خرید و فروش ساده‌تر، مطمئن‌تر و دلنشین‌تری را تجربه کنند.

## شروع
برای استفاده از امکانات کنار باید در [پنل کنار دیوار](https://kenar.divar.ir/admin) حساب داشته‌باشید. 
در پنل کنار، اپلیکیشن مورد نظر خود را اضافه و کلید مورد نیاز را برای صدا زدن APIها دریافت و شروع کنید.
> در حال حاضر امکان ثبت نام عمومی وجود ندارد.

## اپلیکیشن
هر حساب کاربری می‌تواند اپلیکیشن‌های متفاوتی تعریف کند و از طریق آنها خدمات خود را به کاربران دهد. هر اپلیکیشن می‌تواند نام، تصویر نمایه و نوع خدمت متفاوتی ارائه دهد. 
جزییات مشخصات اپلیکیشن و مدیریت آن را در [صفحهٔ مدیریت اپ](./management) ببینید.

## کلید API
هر اپلیکیشن می‌تواند کلید‌های API با دسترسی‌های متفاوتی داشته‌باشد و از طریق آن‌ها به کنار دیوار درخواست ارسال کند.
این کلید همراه همهٔ درخواست‌ها که به کنار ارسال می‌شود باید در هدر `x-api-key` ارسال شود. 

برای ساخت کلید جدید یا ویرایش اجازه‌نامه‌های کلیدهای موجود، پس از ورود به پنل، به [صفحهٔ API Keys](https://kenar.divar.ir/admin/info/apikeys) بروید.

از دکمهٔ `New` برای  ساخت کلید جدید استفاده کنید. با انتخاب اپلیکیشن خود و انتخاب دسترسی‌های لازم، یک کلید جدید بسازید. 
* از هدر `x-api-key` برای ارسال کلید استفاده کنید.
* کلید API را فقط در زمان ساخت می‌توانید ببینید، پس در نگهداری آن دقت کنید.
* فقط دسترسی‌های لازم را به یک کلید دهید. (مسئولیت استفادهٔ نادرست از API و دسترسی‌ها با صاحب اپلیکیشن است)
* هر اپلیکیشن فقط یک کلید با قابلیت استفاده به عنوان کلید OAuth دارد که در قسمت [احرازِ باز](#احرازِ-باز-oauth) توضیح داده‌شده است.

## افزونه‌ها
به اجزایی که توسط سرویس‌دهنده‌های بیرونی به دیوار اضافه می‌شود افزونه یا Add-on می‌گوییم. در حال حاضر امکان توسعهٔ افزونه برای صفحهٔ آگهی و چت در دسترس است.
### افزونه‌های آگهی
در قسمت‌های مشخصی از صفحهٔ آگهی یا صفحهٔ مدیریت آگهی، می‌توان افزونه درج کرد. جزییات درخواست‌های مربوط به این افزونه‌ها را در صفحهٔ [افزونه‌های صفحهٔ آگهی](addons) ببینید.
### افزونه‌های چت 
افزونه‌های چت دیوار بر اساس شرایط (دستهٔ آگهی، شهر آگهی) به کاربران ارائه می‌شود و کاربران هنگام استفاده از یک نوع خدمات (مثلاً ارسال کالا) می‌توانند به اپ یا سایت شما هدایت شوند و خدمت مورد نظر را دریافت کرده و ادامه دهند.
جزییات اتصال سرویس به چت دیوار را در [صفحهٔ افزونه‌های چت](chat) ببینید.
## ویجت‌های دیوار
ویجت‌ها اجزای تشکیل دهندهٔ صفحات در دیوار هستند، که بعضی از آنها را همانطور که در بالا اشاره شد می‌توانید به وسیلهٔ تعریف افزونه، در قسمت‌های مشخصی درج کنید. جزییات ویجت‌ها و روش استفاده از آنها را در [صفحهٔ ویجت‌های دیوار](widgets) ببینید.

مثال از قراردادن ویجت در درخواست درج افزونه به یک آگهی
```JSON
{
    "widgets": {
        "widget_list": [
            {
                "widget_type": "LEGEND_TITLE_ROW",
                "data": {
                    "@type": "type.googleapis.com/widgets.LegendTitleRowData",
                    "title": "ماشین‌باز",
                    "subtitle": "کارشناسی سریع خودرو"
                }
            },
            ...moreWidgets
        ]
    }
}
```

## احرازِ باز (OAuth)
برای درخواست اطلاعات یا دسترسی از کاربران دیوار استاندارد [OAuth 2.0](https://oauth.net/2/) ارائه می‌شود. کتابخانه‌های مرتبط برای استفاده از OAuth را [اینجا](https://oauth.net/code/) می‌توانید ببینید.

برای اطلاع از APIها و روش استفاده از احراز باز، [صفحهٔ احراز باز (OAuth)](oauth) را ببینید.
## منابع و مقادیر عمومی (Assets)
برای دسترسی به مقادیر enum پرکاربرد و معمولاً ثابت دیوار مثل نام شهرها یا دسته‌ها، می‌توانید از API هایی که در [صفحهٔ Assets](assets) توضیح داده‌ایم استفاده کنید.
## محیط تست
برای تست امکاناتی که توسعه می‌دهید می‌توانید از محیط تستی استفاده کنید. این محیط برای چت و افزونه‌های آگهی متفاوت است. توضیحاتشان را در صفحات زیر ببینید.
#### [راهنمای محیط تست افزونه‌های آگهی](./addons/test_environment.md)

## متفرقه
برای موارد و قابلیت های ریز متفرقه به [صفحه Misc](misc) مراجعه کنید
#### [راهنمای محیط تست افزونه‌های چت](./chat/test_environment.md)
