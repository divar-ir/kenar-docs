<br>

<div align="right">

<img src="logo-dark.svg#gh-dark-mode-only" height="64px"/>
<img src="logo-light.svg#gh-light-mode-only" height="64px"/>

</div>

<br><br>

 **کنار دیوار** بستریست برای افزودن اطلاعات و خدمات به دیوار.
 با ارائه‌ی خدمات خود در **کنار دیوار**، به کاربران دیوار کمک کنید تجربه‌ی خرید و فروش ساده‌تر، مطمئن‌تر و دلنشین‌تری را تجربه کنند.
در **کنار دیوار** می‌توانید:
- به آگهی‌گذاران کمک کنید اطلاعات تکمیلی بر آگهی‌های خود اضافه کنند،
- با همکاری آگهی‌گذاران خدمات تکمیلی روی آگهی‌ها ارائه دهید،
- با ارائه‌ی خدمات در چت، تعامل کاربرها را در راستای معامله‌ی سریع‌تر و مطمئن‌تر تسهیل کنید.
---

🚀 برای شروع کار در **کنار دیوار**، با ما تماس بگیرید تا دسترسی شما به [پنل کنار دیوار][پنل کنار] را فراهم کنیم. 

---

<br>

> 🚧 ***در دست احداث*** 🚧
>  
> **کنار دیوار**‌ در حال حاضر در مرحله‌ی آزمایشی است و امکان ثبت‌نام عمومی در آن وجود ندارد. برای ثبت‌نام و فعالیت در این بستر، با ما تماس بگیرید. در این مرحله ممکن است قواعد، سیاست‌ها و ابزارهای **کنار دیوار** دچار تغییرات ناگهانی شوند. به دلیل سرعت تغییرات، ممکن است در بازه‌های زمانی خاصی اطلاعات ارائه شده در این مخزن نیز ناقص یا نیازمند بروزرسانی باشند. 

<br>

# نمای کلی

خدمات مختلف در **کنار دیوار** در قالب «برنامه‌ها» یا «اپلیکیشن» (Application) ها به کاربرهای دیوار می‌شوند. در مرحله‌ی آزمایشی، برای تعریف اپلیکیشن‌های جدید با ما تماس بگیرید. جزییات اپلیکیشن‌های خود را در [صفحه‌ی اپ‌ها در پنل کنار][پنل کنار » اپ‌ها] دیوار مشاهده نمایید. اطلاعات بیشتر در مورد مدیریت اپلیکیشن‌ها را [اینجا بخوانید][راهنما » مدیریت اپ].


<br>

## خدمات روی آگهی‌ها 📜

ارائه‌ی خدمات روی آگهی‌های دیوار به طور کلی در قالب زیر انجام می‌شود:

۱. در انتهای ثبت آگهی در دسته‌بندی‌ها / شهرهای مرتبط، اپلیکیشن شما (در کنار اپلیکیشن‌های مرتبط دیگر) به کاربرها معرفی می‌شوند. \
۲. کاربر می‌تواند اپلیکیشن شما را انتخاب کرده و آن را باز کند، که در این صورت به [آدرس مشخص شده][راهنما » مدیریت اپ »‌ آدرس برنامه] در اپلیکیشن هدایت می‌شود. \
۳. در این مرحله شما می‌توانید [اطلاعات آگهی][راهنما » اطلاعات آگهی] یا [اطلاعات کاربر][راهنما » اطلاعات کاربر] را ([با اجازه‌ی کاربر][راهنما » احراز باز]) از دیوار بگیرید. \
۴. به علاوه، در این مرحله می‌توانید [با اجازه‌ی کاربر][راهنما » احراز باز]، به آگهی مربوطه [محتوا اضافه کنید][راهنما » افزونه‌های آگهی]. این محتوا متشکل از [ویجت‌هایی][راهنما » ویجت‌ها] شامل متن، عکس، امتیاز، عکس، و ... است \
۵. پس از پایان کار، برنامه می‌بایست [کاربر را به دیوار برگرداند][راهنما » بازگشت کاربر]. \
۶. پس از انتشار آگهی، کاربران آگهی‌بیننده می‌توانند با محتوای اضافه شده تعامل داشته باشند (برای مثال، با استفاده از دکمه‌های اضافه شده، آدرس‌های مشخص شده در برنامه‌ی شما را باز کنند). دقت کنید که حتما بعد از پایان تعامل با کاربر، وی را [به دیوار بازگردانید][راهنما » بازگشت کاربر].

<br>

> 💡 ***مثال*** \
> یک سرویس کارشناسی خودرو بعد از ثبت یک آگهی خودرو سواری به کاربر معرفی می‌شود، کاربر به آدرس مشخص شده توسط برنامه هدایت می‌شود، برنامه شماره‌ی تماس کاربر و اطلاعات آگهی را دریافت کرده و با هماهنگی کاربر خودرو را کارشناسی می‌کند. سپس خلاصه‌ای از گزارش کارشناسی را به آگهی اضافه کرده و دکمه‌ای نیز برای مشاهده‌ی گزارش تفصیلی به انتهای خلاصه می‌افزاید.

<br>

> 💡 ***مثال*** \
> یک سرویس پرداخت آنلاین، بعد از ثبت آگهی کالای نو، با فروشنده هماهنگ کرده، اطلاعات و مجوزهای لازم را از وی می‌گیرد، سپس با افزودن دکمه‌ی پرداخت آنلاین به آگهی، به آگهی‌‌بینندگان امکان پرداخت سریع و از طریق درگاه را فراهم می‌آورد.

<br>

---

📖 اطلاعات بیشتر در مورد افزونه‌های آگهی‌ها را [اینجا بخوانید][راهنما » افزونه‌های آگهی].

---

<br>

## خدمات در چت 💬

ارائه‌ی خدمات در چت دیوار به طور کلی در قالب زیر انجام می‌شود:

۱. برنامه‌ی شما در مکالمات مرتبط (دسته‌بندی‌‌ها و شهرهای مرتبط) به کاربرها معرفی می‌شود. \
۲. کاربر برنامه‌ی شما را باز می‌کند. دیوار درخواستی به [آدرس مشخص شده][راهنما » مدیریت اپ »‌ آدرس چت] برای برنامه ارسال کرده و کاربر را به آدرسی که در پاسخ آمده هدایت می‌کند. \
۳. در این مرحله شما می‌توانید [اطلاعات آگهی][راهنما » اطلاعات آگهی] یا [اطلاعات کاربر][راهنما » اطلاعات کاربر] را ([با اجازه‌ی کاربر][راهنما » احراز باز]) از دیوار بگیرید. \
۴. به علاوه، در این مرحله می‌توانید [با اجازه‌ی کاربر][راهنما » احراز باز]، در مکالمه‌ [پیام ارسال کنید][راهنما » ارسال پیام]. \
۵. بعد از پایان تعامل با برنامه، کاربر [به دیوار بازگردانده می‌شود][راهنما » بازگشت کاربر]. \
۶. شما می‌توانید به پیام‌های ارسالی در مکالمه، دکمه‌هایی برای هر یک از طرفین مکالمه ضمیمه کنید که کاربرها با استفاده از آن‌ها، به آدرس مشخص شده هدایت شوند و مجدد [با برنامه‌ی شما تعامل نمایند][راهنما » ارسال پیام‌ » دکمه]. دقت کنید که حتما بعد از پایان تعامل با کاربر، وی را [به دیوار بازگردانید][راهنما » بازگشت کاربر]. 

<br>

> 💡 ***مثال*** \
>  برنامه‌ی پرداخت به کاربر خریدار پیشنهاد شده و وی برنامه را باز کرده، به آدرس ارسالی هدایت می‌شود. برنامه اطلاعات آگهی و شماره‌ی کاربر را دریافت کرده و از طریق درگاه بانکی، مبلغ را از وی دریافت می‌کند. برنامه‌ی پرداخت سپس پیامی در مکالمه ارسال می‌نماید که ذیل آن دکمه‌ای برای فروشنده قرار گرفته تا از طریق آن، مبلغ را دریافت نماید. فروشنده با کلیک بر روی این دکمه به آدرس مشخص شده هدایت می‌شود، برنامه شماره‌ی تماس وی را از دیوار دریافت کرده و سپس با دریافت اطلاعات بانکی، مبلغ را به فروشنده منتقل می‌نماید.

<br>

> 💡 ***مثال*** \
>  برنامه‌ی تنظیم قرارداد به کاربر پیشنهاد می‌شود. وی از طریق برنامه نمونه‌ی قرارداد دلخواه را انتخاب کرده، اطلاعات مربوط به خویش را وارد کرده و به شکل دیجیتال امضاء می‌نماید. برنامه لینک مربوط به این قرارداد را به همراه پیامی در مکالمه برای طرف دیگر ارسال می‌کند، کاربر دیگر با باز کردن لینک مشخص شده قرارداد را پر نموده و به صورت دیجیتال امضاء می‌نماید، سپس برنامه نسخه‌ی امضاء شده را برای طرفین در مکالمه ارسال می‌کند. 

<br>

---

📖 اطلاعات بیشتر در مورد افزونه‌های چت را [اینجا بخوانید][راهنما » افزونه‌های چت].

---

<br>

# تعامل با سرویس‌های دیوار

برای انجام تعاملات یاد شده با سرویس‌های دیوار، مثلا برای دریافت اطلاعات یک آگهی، افزودن محتوا به یک آگهی، یا ارسال پیام در یک مکالمه، می‌بایست به آدرس‌های مشخص شده برای هر قابلیت، درخواست HTTP با فرمت مشخص‌شده بفرستید. هر درخواست باید شامل یک کلید API متعلق به برنامه‌ی شما باشد تا دیوار از طریق آن هویت شما را احراز نماید. برای ایجاد کلید برای برنامه‌ی خود به [صفحه‌ی کلیدها در پنل کنار][پنل کنار‌ » کلیدها] مراجعه کنید.

<br>

> 🔒 ***نکات امنیتی*** \
> \
🔑 کلید خود را در همه‌ی درخواست‌ها، در هدر `x-api-key` قرار دهید. درخواست‌های بدون کلید رد خواهند شد. \
🙈 برای حفظ امنیت، در پنل کنار کلید API را فقط در زمان ساخت می‌توانید ببینید. در نگهداری از آن دقت کنید. \
🕰️ هر برنامه می‌تواند به تعداد دلخواه کلید داشته باشد. برای حفظ امنیت، کلیدها را به شکل دوره‌ای و منظم پاک کرده و از کلیدهای جدید استفاده نمایید. \
🛂 شما می‌توانید دسترسی‌های هر کلید را محدود کنید. جهت حفظ امنیت، دقت کنید که هر کلید ***فقط و فقط*** دسترسی‌های مورد نیاز را داشته باشد. \
🔥 هر اپلیکیشن می‌تواند فقط یک کلید برای [دریافت اجازه‌های مختلف از کاربر][راهنما » احراز باز] داشته باشد.

<br>

برخی قابلیت‌ها، مثل دریافت اطلاعات شخصی کاربرها یا افزودن محتوا به آگهی، نیازمند دریافت اجازه از کاربر هستند. در **کنار دیوار**، این فرآیند بر مبنای [استاندارد OAuth 2.0][احراز باز] انجام می‌شود.  برای کار با این استاندارد، در زبان‌ها و فریم‌ورک‌های مختلف، ابزارهای متنوعی وجود دارند که [برخی از آن‌ها را می‌توانید اینجا ببینید][احراز باز » ابزارها]. برای اطلاعات بیشتر در این مورد، [اینجا را بخوانید][راهنما » احراز باز].

<br>

# محیط تست

- برای تست خدمات روی آگهی‌ها [اینجا را بخوانید][راهنما » افزونه‌های آگهی » تست].
- برای تست خدمات در چت [اینجا را بخوانید][راهنما » افزونه‌های چت »‌ تست].


[پنل کنار]: https://kenar.divar.ir/admin
[پنل کنار » اپ‌ها]: https://kenar.divar.ir/admin/info/apps
[پنل کنار‌ » کلیدها]: https://kenar.divar.ir/admin/info/apikeys
[راهنما » مدیریت اپ]: ./management
[راهنما » مدیریت اپ »‌ آدرس برنامه]: ./management#fallback-url
[راهنما » مدیریت اپ »‌ آدرس چت]: ./management#session-initialization-url
[راهنما » اطلاعات آگهی]: ./finder/get_post.md
[راهنما » اطلاعات کاربر]: ./oauth/get_user.md
[راهنما » احراز باز]: ./oauth
[راهنما » افزونه‌های آگهی]: ./addons
[راهنما » افزونه‌های آگهی » تست]: ./addons/test_environment.md
[راهنما » ویجت‌ها]: ./widgets
[راهنما » ارسال پیام]: ./chat/send_message.md
[راهنما » ارسال پیام‌ » دکمه]: ./chat/send_message.md#کلیک-کاربر-روی-دکمهٔ-درج-شده-زیر-پیام
[راهنما » بازگشت کاربر]: ./misc
[راهنما » افزونه‌های چت]: ./chat
[راهنما » افزونه‌های چت »‌ تست]: ./chat/test_environment.md
[احراز باز]: https://oauth.net/2/
[احراز باز » ابزارها]: https://oauth.net/code/
