"use strict";(self.webpackChunkkenar_docs=self.webpackChunkkenar_docs||[]).push([["4226"],{25172:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>d,toc:()=>o,default:()=>h,metadata:()=>a,assets:()=>l,contentTitle:()=>s});var a=JSON.parse('{"id":"chat/upload_media","title":"\u0622\u067E\u0644\u0648\u062F media \u062F\u0631 \u0686\u062A \u062F\u06CC\u0648\u0627\u0631 (\u0622\u0632\u0645\u0627\u06CC\u0634\u06CC)","description":"\u0627\u06CC\u0646 API \u062F\u0631 \u062D\u0627\u0644 \u062D\u0627\u0636\u0631 \u062F\u0631 \u0645\u0631\u062D\u0644\u0647 \u0622\u0632\u0645\u0627\u06CC\u0634\u06CC \u0642\u0631\u0627\u0631 \u062F\u0627\u0631\u062F \u0648 \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A \u0622\u062A\u06CC \u0627\u0639\u0645\u0627\u0644 \u0634\u0648\u062F.","source":"@site/docs/chat/upload_media.md","sourceDirName":"chat","slug":"/chat/upload_media","permalink":"/kenar-docs/chat/upload_media","draft":false,"unlisted":false,"editUrl":"https://github.com/divar-ir/kenar-docs/edit/master/docs/chat/upload_media.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u0645\u06A9\u0627\u0644\u0645\u0647 \u0628\u0627 \u0686\u062A\u200C\u0628\u0627\u062A (\u0622\u0632\u0645\u0627\u06CC\u0634\u06CC)","permalink":"/kenar-docs/chat/chatbot_conversations"},"next":{"title":"\u0627\u0631\u0633\u0627\u0644 \u067E\u06CC\u0627\u0645 \u062F\u0631 \u0686\u062A","permalink":"/kenar-docs/chat/users_conversations"}}'),t=i(85893),r=i(50065);let d={},s="\u0622\u067E\u0644\u0648\u062F media \u062F\u0631 \u0686\u062A \u062F\u06CC\u0648\u0627\u0631 (\u0622\u0632\u0645\u0627\u06CC\u0634\u06CC)",l={},o=[{value:"\u0646\u0645\u0627\u06CC \u06A9\u0644\u06CC",id:"\u0646\u0645\u0627\u06CC-\u06A9\u0644\u06CC",level:2},{value:"\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u200C\u0647\u0627\u06CC \u0641\u0627\u06CC\u0644",id:"\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u0647\u0627\u06CC-\u0641\u0627\u06CC\u0644",level:2},{value:"\u0645\u0631\u062D\u0644\u0647 \u06F1: \u062F\u0631\u06CC\u0627\u0641\u062A \u062A\u0648\u06A9\u0646 \u0622\u067E\u0644\u0648\u062F",id:"\u0645\u0631\u062D\u0644\u0647-\u06F1-\u062F\u0631\u06CC\u0627\u0641\u062A-\u062A\u0648\u06A9\u0646-\u0622\u067E\u0644\u0648\u062F",level:2},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"\u0645\u0631\u062D\u0644\u0647 \u06F2: \u0622\u067E\u0644\u0648\u062F <code>media</code>",id:"\u0645\u0631\u062D\u0644\u0647-\u06F2-\u0622\u067E\u0644\u0648\u062F-media",level:2},{value:"Request",id:"request-1",level:3},{value:"\u0645\u062B\u0627\u0644 \u0628\u0627 cURL",id:"\u0645\u062B\u0627\u0644-\u0628\u0627-curl",level:3},{value:"\u0645\u062B\u0627\u0644 \u0628\u0627 JavaScript (FormData)",id:"\u0645\u062B\u0627\u0644-\u0628\u0627-javascript-formdata",level:3},{value:"\u0645\u062B\u0627\u0644 \u0628\u0627 Python (requests)",id:"\u0645\u062B\u0627\u0644-\u0628\u0627-python-requests",level:3},{value:"Response",id:"response-1",level:3},{value:"\u0645\u0631\u062D\u0644\u0647 \u06F3: \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 <code>media_token</code> \u062F\u0631 \u0686\u062A \u0634\u0645\u0627",id:"\u0645\u0631\u062D\u0644\u0647-\u06F3-\u0627\u0633\u062A\u0641\u0627\u062F\u0647-\u0627\u0632-media_token-\u062F\u0631-\u0686\u062A-\u0634\u0645\u0627",level:2}];function c(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u0622\u067E\u0644\u0648\u062F-media-\u062F\u0631-\u0686\u062A-\u062F\u06CC\u0648\u0627\u0631-\u0622\u0632\u0645\u0627\u06CC\u0634\u06CC",children:"\u0622\u067E\u0644\u0648\u062F media \u062F\u0631 \u0686\u062A \u062F\u06CC\u0648\u0627\u0631 (\u0622\u0632\u0645\u0627\u06CC\u0634\u06CC)"})}),"\n",(0,t.jsx)(n.admonition,{title:"\u062A\u0648\u062C\u0647",type:"warning",children:(0,t.jsx)(n.p,{children:"\u0627\u06CC\u0646 API \u062F\u0631 \u062D\u0627\u0644 \u062D\u0627\u0636\u0631 \u062F\u0631 \u0645\u0631\u062D\u0644\u0647 \u0622\u0632\u0645\u0627\u06CC\u0634\u06CC \u0642\u0631\u0627\u0631 \u062F\u0627\u0631\u062F \u0648 \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A \u0622\u062A\u06CC \u0627\u0639\u0645\u0627\u0644 \u0634\u0648\u062F."})}),"\n",(0,t.jsxs)(n.p,{children:["\u0627\u06CC\u0646 \u0641\u0631\u0627\u06CC\u0646\u062F \u0634\u0627\u0645\u0644 \u06F3 \u0645\u0631\u062D\u0644\u0647 \u0627\u0633\u062A\u060C \u0627\u0628\u062A\u062F\u0627 \u0628\u0627\u06CC\u062F \u062A\u0648\u06A9\u0646 \u062C\u0647\u062A \u062F\u0631\u06CC\u0627\u0641\u062A \u062F\u0633\u062A\u0631\u0633\u06CC \u0628\u0647 \u0622\u067E\u0644\u0648\u062F \u0631\u0627 \u062F\u0631\u06CC\u0627\u0641\u062A \u06A9\u0646\u06CC\u062F.\n\u0633\u067E\u0633 \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u062A\u0648\u06A9\u0646 \u062F\u0631\u06CC\u0627\u0641\u062A\u06CC \u0641\u0627\u06CC\u0644 \u0645\u062F\u06CC\u0627 \u062E\u0648\u062F \u0631\u0627 \u0622\u067E\u0644\u0648\u062F \u06A9\u0646\u06CC\u062F.\n\u0648 \u062F\u0631 \u0646\u0647\u0627\u06CC\u062A \u0628\u0627 ",(0,t.jsx)(n.code,{children:"media_token"})," \u062F\u0631\u06CC\u0627\u0641\u062A\u06CC \u062F\u0631 \u0686\u062A \u0645\u062F \u0646\u0638\u0631 \u062E\u0648\u062F media \u062E\u0648\u062F\u062A\u0648\u0646 \u0631\u0648 \u0628\u0641\u0631\u0633\u062A\u06CC\u062F"]}),"\n",(0,t.jsx)(n.h2,{id:"\u0646\u0645\u0627\u06CC-\u06A9\u0644\u06CC",children:"\u0646\u0645\u0627\u06CC \u06A9\u0644\u06CC"}),"\n",(0,t.jsx)(n.mermaid,{value:'sequenceDiagram\n    participant Client as \u0628\u0631\u0646\u0627\u0645\u0647 \u0634\u0645\u0627\n    participant Platform as Kenar API\n    participant ChatUpload as Chat Upload Endpoint\n\n    Client->>Platform: POST /experimental/open-platform/chat/upload\n    Note over Client,Platform: \u062F\u0631\u06CC\u0627\u0641\u062A upload token\n    Platform--\x3e>Client: {token: "upload_token"}\n    \n    Client->>ChatUpload: POST /upload/{media_type}\n    Note over Client,ChatUpload: \u0622\u067E\u0644\u0648\u062F \u0641\u0627\u06CC\u0644 \u0628\u0627 Authorization: Bearer upload_token\n    ChatUpload--\x3e>Client: {id: "media_token", status: "ok"}\n    \n    Client->>Platform: POST /send-message\n    Note over Client,Platform: \u0627\u0631\u0633\u0627\u0644 \u067E\u06CC\u0627\u0645 \u0628\u0627 media_token\n    Platform--\x3e>Client: \u067E\u06CC\u0627\u0645 \u0627\u0631\u0633\u0627\u0644 \u0634\u062F'}),"\n",(0,t.jsx)(n.h2,{id:"\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u0647\u0627\u06CC-\u0641\u0627\u06CC\u0644",children:"\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u200C\u0647\u0627\u06CC \u0641\u0627\u06CC\u0644"}),"\n",(0,t.jsx)(n.admonition,{title:"\u0641\u0631\u0645\u062A\u200C\u0647\u0627\u06CC \u0645\u062C\u0627\u0632",type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u062A\u0635\u0627\u0648\u06CC\u0631:"})," PNG, JPEG, JPG",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u0641\u0627\u06CC\u0644\u200C\u0647\u0627:"})," PDF, DOC, DOCX, XLSX, XLS, PPTX, PPT",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u0635\u062F\u0627:"})," M4A, 3GP",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u0648\u06CC\u062F\u06CC\u0648:"})," MP4"]})}),"\n",(0,t.jsx)(n.admonition,{title:"\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u200C\u0647\u0627\u06CC \u062D\u062C\u0645",type:"caution",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u062A\u0635\u0627\u0648\u06CC\u0631:"})," \u062D\u062F\u0627\u06A9\u062B\u0631 5 \u0645\u06AF\u0627\u0628\u0627\u06CC\u062A"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u0641\u0627\u06CC\u0644\u200C\u0647\u0627:"})," \u062D\u062F\u0627\u06A9\u062B\u0631 5 \u0645\u06AF\u0627\u0628\u0627\u06CC\u062A"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u0635\u062F\u0627:"})," \u062D\u062F\u0627\u06A9\u062B\u0631 1.5 \u0645\u06AF\u0627\u0628\u0627\u06CC\u062A"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u0648\u06CC\u062F\u06CC\u0648:"})," \u062D\u062F\u0627\u06A9\u062B\u0631 50 \u0645\u06AF\u0627\u0628\u0627\u06CC\u062A"]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"\u0645\u0631\u062D\u0644\u0647-\u06F1-\u062F\u0631\u06CC\u0627\u0641\u062A-\u062A\u0648\u06A9\u0646-\u0622\u067E\u0644\u0648\u062F",children:"\u0645\u0631\u062D\u0644\u0647 \u06F1: \u062F\u0631\u06CC\u0627\u0641\u062A \u062A\u0648\u06A9\u0646 \u0622\u067E\u0644\u0648\u062F"}),"\n",(0,t.jsx)(n.p,{children:"\u0627\u0628\u062A\u062F\u0627\u060C \u0634\u0645\u0627 \u0646\u06CC\u0627\u0632 \u062F\u0627\u0631\u06CC\u062F \u06CC\u06A9 \u062A\u0648\u06A9\u0646 \u0622\u067E\u0644\u0648\u062F \u062F\u0631\u06CC\u0627\u0641\u062A \u06A9\u0646\u06CC\u062F \u06A9\u0647 \u0628\u0631\u0627\u06CC \u0645\u062C\u0648\u0632 \u0622\u067E\u0644\u0648\u062F \u0631\u0633\u0627\u0646\u0647 \u0634\u0645\u0627 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u062E\u0648\u0627\u0647\u062F \u0634\u062F."}),"\n",(0,t.jsx)(n.h3,{id:"request",children:"Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST https://open-api.divar.ir/experimental/open-platform/chat/upload\nContent-Type: application/json\nx-api-key: {{apikey}}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "token": "your_upload_token"\n}\n'})}),"\n",(0,t.jsxs)(n.h2,{id:"\u0645\u0631\u062D\u0644\u0647-\u06F2-\u0622\u067E\u0644\u0648\u062F-media",children:["\u0645\u0631\u062D\u0644\u0647 \u06F2: \u0622\u067E\u0644\u0648\u062F ",(0,t.jsx)(n.code,{children:"media"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u067E\u0633 \u0627\u0632 \u062F\u0631\u06CC\u0627\u0641\u062A ",(0,t.jsx)(n.code,{children:"upload_token"}),"\u060C \u0627\u0632 \u0622\u0646 \u0628\u0631\u0627\u06CC \u0622\u067E\u0644\u0648\u062F \u0641\u0627\u06CC\u0644 ",(0,t.jsx)(n.code,{children:"media"})," \u062E\u0648\u062F \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."]}),"\n",(0,t.jsx)(n.admonition,{title:"\u0646\u06A9\u062A\u0647 \u0645\u0647\u0645",type:"important",children:(0,t.jsxs)(n.p,{children:["\u0641\u0627\u06CC\u0644 \u0628\u0627\u06CC\u062F \u0628\u0647 \u0635\u0648\u0631\u062A ",(0,t.jsx)(n.strong,{children:"multipart/form-data"})," \u0648 \u062F\u0631 \u0641\u06CC\u0644\u062F \u0628\u0627 \u0646\u0627\u0645 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"file"})})," \u0627\u0631\u0633\u0627\u0644 \u0634\u0648\u062F."]})}),"\n",(0,t.jsx)(n.h3,{id:"request-1",children:"Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST https://chat.divar.ir/upload/{{media_type}}\nAuthorization: Bearer {{upload_token}}\nAccept: */*\nContent-Type: multipart/form-data\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Form Data:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"file: [\u0641\u0627\u06CC\u0644 \u0634\u0645\u0627] (\u0646\u0627\u0645 \u0641\u0627\u06CC\u0644 \u0628\u0627\u06CC\u062F \u062F\u0631 value \u0645\u0634\u062E\u0635 \u0634\u062F\u0647 \u0628\u0627\u0634\u062F)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u0645\u062B\u0627\u0644-\u0628\u0627-curl",children:"\u0645\u062B\u0627\u0644 \u0628\u0627 cURL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://chat.divar.ir/upload/image" \\\n  -H "Authorization: Bearer your_upload_token" \\\n  -H "Accept: */*" \\\n  -F "file=@/path/to/your/image.jpg"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u0645\u062B\u0627\u0644-\u0628\u0627-javascript-formdata",children:"\u0645\u062B\u0627\u0644 \u0628\u0627 JavaScript (FormData)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const formData = new FormData();\nformData.append('file', fileInput.files[0]); // \u0641\u0627\u06CC\u0644 \u0648 \u0646\u0627\u0645 \u0622\u0646 \u062E\u0648\u062F\u06A9\u0627\u0631 \u062A\u0646\u0638\u06CC\u0645 \u0645\u06CC\u200C\u0634\u0648\u062F\n\nfetch('https://chat.divar.ir/upload/image', {\n  method: 'POST',\n  headers: {\n    'Authorization': `Bearer ${upload_token}`,\n    'Accept': '*/*'\n  },\n  body: formData\n})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u0645\u062B\u0627\u0644-\u0628\u0627-python-requests",children:"\u0645\u062B\u0627\u0644 \u0628\u0627 Python (requests)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import requests\n\nfiles = {\n    'file': ('image.jpg', open('path/to/image.jpg', 'rb'), 'image/jpeg')\n}\n\nheaders = {\n    'Authorization': f'Bearer {upload_token}',\n    'Accept': '*/*'\n}\n\nresponse = requests.post(\n    'https://chat.divar.ir/upload/image',\n    files=files,\n    headers=headers\n)\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"\u0627\u0646\u0648\u0627\u0639 media_type",type:"note",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"media_type"})," \u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u062F \u06CC\u06A9\u06CC \u0627\u0632 \u0645\u0642\u0627\u062F\u06CC\u0631 \u0632\u06CC\u0631 \u0628\u0627\u0634\u062F: ",(0,t.jsx)(n.code,{children:"image"}),", ",(0,t.jsx)(n.code,{children:"video"}),", ",(0,t.jsx)(n.code,{children:"voice"}),", ",(0,t.jsx)(n.code,{children:"file"})]})}),"\n",(0,t.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "your_media_token",\n  "status": "ok"\n}\n'})}),"\n",(0,t.jsxs)(n.h2,{id:"\u0645\u0631\u062D\u0644\u0647-\u06F3-\u0627\u0633\u062A\u0641\u0627\u062F\u0647-\u0627\u0632-media_token-\u062F\u0631-\u0686\u062A-\u0634\u0645\u0627",children:["\u0645\u0631\u062D\u0644\u0647 \u06F3: \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 ",(0,t.jsx)(n.code,{children:"media_token"})," \u062F\u0631 \u0686\u062A \u0634\u0645\u0627"]}),"\n",(0,t.jsxs)(n.p,{children:["\u062F\u0631 \u0646\u0647\u0627\u06CC\u062A\u060C \u0627\u0632 ",(0,t.jsx)(n.code,{children:"media_token"})," \u062F\u0631 \u067E\u06CC\u0627\u0645\u200C\u0647\u0627\u06CC \u0645\u06A9\u0627\u0644\u0645\u0647 \u062E\u0648\u062F \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."]}),"\n",(0,t.jsxs)(n.p,{children:["\u0627\u06CC\u0646 \u06A9\u0627\u0631 \u0628\u0627 \u067E\u0631 \u06A9\u0631\u062F\u0646 \u0641\u06CC\u0644\u062F ",(0,t.jsx)(n.code,{children:"media_token"})," \u062F\u0631 ",(0,t.jsx)(n.code,{children:"object"})," \u067E\u06CC\u0627\u0645 \u0627\u0646\u062C\u0627\u0645 \u0645\u06CC\u200C\u0634\u0648\u062F."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "media_token": "your_media_token"\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{title:"\u0644\u06CC\u0646\u06A9\u200C\u0647\u0627\u06CC \u0645\u0631\u062A\u0628\u0637",type:"info",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u0627\u0631\u0633\u0627\u0644 \u067E\u06CC\u0627\u0645 \u0628\u0627 media \u062F\u0631 \u0686\u062A\u200C\u0628\u0627\u062A \u0631\u0627 \u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F \u062F\u0631 ",(0,t.jsx)(n.a,{href:"/kenar-docs/chat/chatbot_conversations",children:"\u0627\u06CC\u0646\u062C\u0627"})," \u0628\u062E\u0648\u0627\u0646\u06CC\u062F."]}),"\n",(0,t.jsxs)(n.li,{children:["\u0627\u0631\u0633\u0627\u0644 \u067E\u06CC\u0627\u0645 \u0628\u0627 media \u062F\u0631 \u0686\u062A \u0631\u0627 \u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F \u062F\u0631 ",(0,t.jsx)(n.a,{href:"/kenar-docs/chat/users_conversations",children:"\u0627\u06CC\u0646\u062C\u0627"})," \u0628\u062E\u0648\u0627\u0646\u06CC\u062F."]}),"\n"]})})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);