"use strict";(self.webpackChunkkenar_docs=self.webpackChunkkenar_docs||[]).push([[8931],{877:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"migrations/send_message_v2+events","title":"\u0645\u0647\u0627\u062c\u0631\u062a \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u0648 \u0631\u0648\u06cc\u062f\u0627\u062f\u200c\u0647\u0627","description":"\u0644\u06cc\u0633\u062a \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a","source":"@site/docs/migrations/002_send_message_v2+events.md","sourceDirName":"migrations","slug":"/migrations/send_message_v2+events","permalink":"/kenar-docs/migrations/send_message_v2+events","draft":false,"unlisted":false,"editUrl":"https://github.com/divar-ir/kenar-docs/tree/main/docs/migrations/002_send_message_v2+events.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u0645\u0647\u0627\u062c\u0631\u062a \u0627\u0641\u0632\u0648\u0646\u0647","permalink":"/kenar-docs/migrations/user_addon_v2+addon_v2+user_semantic"},"next":{"title":"\u0645\u0647\u0627\u062c\u0631\u062a \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u062c\u0633\u062a\u200c\u0648\u200c\u062c\u0648\u06cc \u0622\u06af\u0647\u06cc","permalink":"/kenar-docs/migrations/search_posts_v2"}}');var s=t(4848),a=t(8453);const o={},r="\u0645\u0647\u0627\u062c\u0631\u062a \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u0648 \u0631\u0648\u06cc\u062f\u0627\u062f\u200c\u0647\u0627",c={},d=[{value:"\u0644\u06cc\u0633\u062a \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a",id:"\u0644\u06cc\u0633\u062a-\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a",level:2},{value:"\u0645\u0647\u0627\u062c\u0631\u062a",id:"\u0645\u0647\u0627\u062c\u0631\u062a",level:2},{value:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u062f\u0631 \u0686\u062a",id:"\u0627\u0631\u0633\u0627\u0644-\u067e\u06cc\u0627\u0645-\u062f\u0631-\u0686\u062a",level:3},{value:"\u062e\u0648\u0627\u0646\u062f\u0646 \u062f\u0631 \u0644\u062d\u0638\u0647\u200c\u06cc \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u06cc\u06a9 \u0622\u06af\u0647\u06cc",id:"\u062e\u0648\u0627\u0646\u062f\u0646-\u062f\u0631-\u0644\u062d\u0638\u0647\u06cc-\u067e\u06cc\u0627\u0645\u0647\u0627\u06cc-\u06cc\u06a9-\u0622\u06af\u0647\u06cc",level:3}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u0645\u0647\u0627\u062c\u0631\u062a-\u0627\u0631\u0633\u0627\u0644-\u067e\u06cc\u0627\u0645-\u0648-\u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627",children:"\u0645\u0647\u0627\u062c\u0631\u062a \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u0648 \u0631\u0648\u06cc\u062f\u0627\u062f\u200c\u0647\u0627"})}),"\n",(0,s.jsx)(e.h2,{id:"\u0644\u06cc\u0633\u062a-\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a",children:"\u0644\u06cc\u0633\u062a \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u062a\u063a\u06cc\u06cc\u0631 \u0633\u0627\u062e\u062a\u0627\u0631 \u0627\u06a9\u0634\u0646\u200c\u0647\u0627:\u200c \u0628\u0627 \u062c\u0627\u06cc\u06af\u0632\u06cc\u0646 \u0634\u062f\u0646 \u0627\u06a9\u0634\u0646\u200c\u0647\u0627\u06cc \u0642\u062f\u06cc\u0645\u06cc \u062a\u0648\u0633\u0637 \u0627\u06a9\u0634\u0646\u200c\u0647\u0627\u06cc \u062c\u062f\u06cc\u062f\u060c\u0627\u0645\u06a9\u0627\u0646 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0648 \u0645\u062a\u0646\u0648\u0639 \u062a\u0631\u06cc \u0631\u0627 \u062f\u0627\u0631\u06cc\u062f. \u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u0627\u06cc\u0646\u060c \u0627\u06a9\u0634\u0646\u200c\u0647\u0627\u06cc \u0627\u0641\u0632\u0648\u0646\u0647\u200c\u0647\u0627 \u0648 \u0686\u062a \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647 \u0634\u062f\u0646\u062f."}),"\n",(0,s.jsx)(e.li,{children:"\u0627\u0636\u0627\u0641\u0647 \u0634\u062f\u0646 API \u062c\u062f\u06cc\u062f \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u062f\u0631 \u0686\u062a: \u0627\u0632 \u0627\u06cc\u0646 \u0628\u0647 \u0628\u0639\u062f \u062a\u0646\u0647\u0627 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 conversation_id \u0628\u0647 \u0647\u0631 \u0645\u06a9\u0627\u0644\u0645\u0647\u200c\u0627\u06cc \u067e\u06cc\u0627\u0645 \u0628\u0641\u0631\u0633\u062a\u06cc\u062f.  \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0627\u06cc\u0646 API \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0648\u0644\u06cc\u0646 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u062f\u0631 \u0645\u06a9\u0627\u0644\u0645\u0647\u200c\u0647\u0627 \u0628\u0641\u0631\u0633\u062a\u06cc\u062f."}),"\n",(0,s.jsx)(e.li,{children:"\u0627\u0645\u06a9\u0627\u0646 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0686\u0646\u062f\u06cc\u0646 \u062f\u06a9\u0645\u0647 \u0628\u0627 \u0627\u06a9\u0634\u0646\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641: \u0634\u0645\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f  \u0628\u0631\u0627\u06cc \u062a\u0639\u0627\u0645\u0644 \u0628\u0627 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u062f\u0631 \u0686\u062a \u0628\u0639\u062f \u0627\u0632 \u0647\u0631 \u067e\u06cc\u0627\u0645 \u062a\u0627\u0646 \u062a\u0627 \u06f9 \u062f\u06a9\u0645\u0647 \u0642\u0631\u0627\u0631 \u062f\u0647\u06cc\u062f."}),"\n",(0,s.jsx)(e.li,{children:"\u0633\u0627\u062e\u062a\u0627\u0631 \u062c\u062f\u06cc\u062f \u0647\u062f\u0627\u06cc\u062a \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0628\u0647 \u0633\u0645\u062a \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u06cc \u0634\u0645\u0627: \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0627\u06cc\u0646 \u0633\u0627\u062e\u062a\u0627\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u062f\u0627\u062f\u0647\u200c\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u062e\u0648\u062f\u062a\u0627\u0646 \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f\u060c \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0636\u0627\u0641\u0647\u200c\u062a\u0631\u06cc \u0627\u0632 \u06a9\u0627\u0631\u0628\u0631 \u0628\u0633\u062a\u0647 \u0628\u0647 \u0645\u06a9\u0627\u0646\u06cc \u06a9\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0627\u0632 \u0622\u0646 \u0628\u0647 \u0633\u0645\u062a \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u06cc \u0634\u0645\u0627 \u0647\u062f\u0627\u06cc\u062a \u0645\u06cc\u200c\u0634\u0648\u062f \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u06cc\u062f."}),"\n",(0,s.jsx)(e.li,{children:"\u0633\u0627\u062e\u062a\u0627\u0631 \u062c\u062f\u06cc\u062f \u06af\u0648\u0634 \u062f\u0627\u062f\u0646 \u0628\u0647 \u0631\u0648\u06cc\u062f\u0627\u062f\u200c\u0647\u0627\u06cc \u062f\u06cc\u0648\u0627\u0631: \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0633\u0627\u062e\u062a\u0627\u0631 \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647 \u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0632 \u0627\u062a\u0641\u0627\u0642\u0627\u062a\u06cc \u06a9\u0647 \u062f\u0631 \u062f\u06cc\u0648\u0627\u0631 \u0631\u062e \u0645\u06cc\u200c\u062f\u0647\u062f\u060c \u062f\u0631 \u0644\u062d\u0638\u0647 \u0628\u0627 \u062e\u0628\u0631 \u0634\u0648\u06cc\u062f."}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u0645\u0647\u0627\u062c\u0631\u062a",children:"\u0645\u0647\u0627\u062c\u0631\u062a"}),"\n",(0,s.jsxs)(e.p,{children:["\u0645\u0647\u0645 \u062a\u0631\u06cc\u0646 \u0645\u0648\u0631\u062f\u06cc \u06a9\u0647 \u0628\u0631\u0627\u06cc \u0645\u0647\u0627\u062c\u0631\u062a \u0628\u0647 \u0627\u06cc\u0646 \u0648\u0631\u0698\u0646 \u0628\u0627\u06cc\u062f \u0628\u0647 \u0622\u0646 \u062a\u0648\u062c\u0647 \u06a9\u0646\u06cc\u062f\u060c \u0627\u0633\u06a9\u0648\u067e \u062c\u062f\u06cc\u062f \u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u062f\u0631 \u0686\u062a \u0647\u0633\u062a. \u0634\u0645\u0627 \u0628\u0627 \u062f\u0627\u0634\u062a\u0646 \u0627\u0633\u06a9\u0648\u067e ",(0,s.jsx)(e.code,{children:"CONVERSATION_SEND_MESSAGE"})," \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0632 API \u062c\u062f\u06cc\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f. \u0627\u0628\u062a\u062f\u0627 \u0645\u0637\u0645\u0626\u0646 \u0634\u0648\u06cc\u062f \u06a9\u0647 \u0627\u067e \u0634\u0645\u0627 \u0628\u0647 \u0627\u06cc\u0646 \u0627\u0633\u06a9\u0648\u067e \u062f\u0633\u062a\u0631\u0633\u06cc \u062f\u0627\u0631\u062f \u0648 \u0633\u067e\u0633 \u0628\u0627 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u06cc\u0646 \u062f\u0633\u062a\u0631\u0633\u06cc \u0627\u0632 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646\u200c\u062a\u0627\u0646\u060c \u0627\u06cc\u0646 \u0627\u062c\u0627\u0632\u0647 \u0631\u0627 \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u06cc\u062f. \u0633\u067e\u0633 \u0628\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc API ",(0,s.jsx)(e.a,{href:"/kenar-docs/chat/users_conversations#%D8%AF%D8%B1%D8%AE%D9%88%D8%A7%D8%B3%D8%AA-%D8%A7%D8%B1%D8%B3%D8%A7%D9%84-%D9%BE%DB%8C%D8%A7%D9%85-%D8%AF%D8%B1-%DA%86%D8%AA",children:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u062f\u0631 \u0686\u062a"})," \u067e\u06cc\u0627\u0645 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u062e\u0648\u062f \u0631\u0627 \u062f\u0631 \u0686\u062a \u0627\u0631\u0633\u0627\u0644 \u06a9\u0646\u06cc\u062f."]}),"\n",(0,s.jsxs)(e.p,{children:["\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0631\u0627\u06cc \u0647\u062f\u0627\u06cc\u062a \u06a9\u0627\u0631\u0628\u0631 \u0628\u0647 \u0633\u0645\u062a \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u06cc \u0634\u0645\u0627\u060c \u062f\u0631 \u0633\u0627\u062e\u062a\u0627\u0631 \u062c\u062f\u06cc\u062f \u0627\u0628\u062a\u062f\u0627 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u06cc \u0628\u0647 \u0622\u062f\u0631\u0633 \u0634\u0631\u0648\u0639 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u06cc \u0634\u0645\u0627 (\u062a\u0639\u0631\u06cc\u0641 \u0634\u062f\u0647 \u062f\u0631 \u067e\u0646\u0644 \u06a9\u0646\u0627\u0631 \u062f\u06cc\u0648\u0627\u0631) \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc\u200c\u0634\u0648\u062f \u06a9\u0647 \u062d\u0627\u0648\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0627\u0633\u062a \u0648 \u0627\u0646\u062a\u0638\u0627\u0631 \u0645\u06cc\u200c\u0631\u0648\u062f \u06a9\u0647 \u062f\u0631 \u067e\u0627\u0633\u062e \u0628\u0647 \u0627\u06cc\u0646 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u060c \u0622\u062f\u0631\u0633\u06cc  \u06a9\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0628\u0627\u06cc\u062f \u0628\u0647 \u0622\u0646 \u0647\u062f\u0627\u06cc\u062a \u0634\u0648\u062f \u0631\u0627 \u0628\u0631\u06af\u0631\u062f\u0627\u0646\u06cc\u062f. \u062a\u0641\u0627\u0648\u062a \u0627\u06cc\u0646 \u0646\u0633\u062e\u0647\u200c \u0628\u0627 \u062d\u0627\u0644\u062a \u0642\u0628\u0644\u06cc\u060c \u0633\u0627\u062e\u062a\u0627\u0631 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0628\u0631\u0627\u06cc \u0634\u0645\u0627 \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc\u200c\u0634\u0648\u062f. \u062f\u0631 \u0635\u0648\u0631\u062a\u06cc \u06a9\u0647 \u0627\u0632 \u0647\u0631 \u062f\u0648 \u0631\u0648\u0634 \u0628\u0631\u0627\u06cc \u0647\u062f\u0627\u06cc\u062a \u06a9\u0627\u0631\u0628\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f \u0628\u0627\u06cc\u062f \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 HTTP Header ",(0,s.jsx)(e.code,{children:"API_VERSION"})," \u062a\u0634\u062e\u06cc\u0635 \u062f\u0647\u06cc\u062f \u06a9\u0647 \u0627\u06cc\u0646 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u06a9\u062f\u0627\u0645 \u0646\u0633\u062e\u0647 \u0647\u0633\u062a \u0648 \u0633\u067e\u0633 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0631\u0627 \u0628\u0631\u0631\u0633\u06cc \u06a9\u0646\u06cc\u062f \u0648 \u0622\u062f\u0631\u0633 \u0628\u0627\u0632\u06af\u0634\u062a \u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u067e\u0627\u0633\u062e \u0628\u0631\u06af\u0631\u062f\u0627\u0646\u06cc\u062f. \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u062f\u0631 \u0645\u0648\u0631\u062f \u0627\u06cc\u0646 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0631\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f ",(0,s.jsx)(e.a,{href:"/kenar-docs/widgets/actions/open_server_link",children:"\u0627\u06cc\u0646\u062c\u0627"})," \u0628\u0628\u06cc\u0646\u06cc\u062f."]}),"\n",(0,s.jsx)(e.h3,{id:"\u0627\u0631\u0633\u0627\u0644-\u067e\u06cc\u0627\u0645-\u062f\u0631-\u0686\u062a",children:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 \u062f\u0631 \u0686\u062a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-diff",children:'- POST https://api.divar.ir/v2/open-platform/chat/conversation\n+ POST https://api.divar.ir/v2/open-platform/conversations/{{conversation_id}}/messages\nContent-Type: application/json\nx-api-key: {{apikey}}\nx-access-token: {{access_token}}\n\n{\n-   "user_id": "\u0634\u0646\u0627\u0633\u0647\u0654 \u06a9\u0627\u0631\u0628\u0631 \u0641\u0631\u0633\u062a\u0646\u062f\u0647 \u06a9\u0647 \u0645\u06cc \u062e\u0648\u0627\u0647\u06cc\u0645 \u067e\u06cc\u0627\u0645\u06cc \u0627\u0632 \u0633\u0645\u062a \u0627\u0648 \u0648\u0627\u0631\u062f \u0686\u062a \u06a9\u0646\u06cc\u0645",\n-   "post_token": "\u062a\u0648\u06a9\u0646 \u0622\u06af\u0647\u06cc \u0645\u0648\u0631\u062f \u0686\u062a",\n-   "peer_id": "\u0634\u0646\u0627\u0633\u0647\u0654 \u06a9\u0627\u0631\u0628\u0631 \u06af\u06cc\u0631\u0646\u062f\u0647 \u062f\u0631 \u0686\u062a",\n   "type": "TEXT",\n   "message": "\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645",\n-   "sender_btn": {\n-       "action": "LINK",\n-       "data": {\n-           "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u062f\u06a9\u0645\u0647",\n-           "extra_data": {\n-               "your_custom_key":"\u0627\u0637\u0644\u0627\u0639\u0627\u062a\u06cc \u06a9\u0647 \u062f\u0631 \u0627\u062f\u0627\u0645\u0647 \u0647\u0646\u06af\u0627\u0645 \u06a9\u0644\u06cc\u06a9 \u0631\u0648\u06cc \u062f\u06a9\u0645\u0647 \u0646\u06cc\u0627\u0632 \u062f\u0627\u0631\u06cc\u0645"\n-           },\n-           "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647\u0654 \u0632\u06cc\u0631 \u067e\u06cc\u0627\u0645 \u0628\u0631\u0627\u06cc \u0637\u0631\u0641 \u0641\u0631\u0633\u062a\u0646\u062f\u0647"\n-       }\n-   },\n-   "receiver_btn": {\n-       "action": "LINK",\n-       "data": {\n-           "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u062f\u06a9\u0645\u0647",\n-           "extra_data": {\n-               "your_custom_key":"\u0627\u0637\u0644\u0627\u0639\u0627\u062a\u06cc \u06a9\u0647 \u062f\u0631 \u0627\u062f\u0627\u0645\u0647 \u0647\u0646\u06af\u0627\u0645 \u06a9\u0644\u06cc\u06a9 \u0631\u0648\u06cc \u062f\u06a9\u0645\u0647 \u0646\u06cc\u0627\u0632 \u062f\u0627\u0631\u06cc\u0645"\n-           },\n-           "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647\u0654 \u0632\u06cc\u0631 \u067e\u06cc\u0627\u0645 \u0628\u0631\u0627\u06cc \u0637\u0631\u0641 \u06af\u06cc\u0631\u0646\u062f\u0647"\n-       }\n-   }\n+   "sender_buttons": {\n+       "rows": [\n+           {\n+               "buttons": [\n+                   {\n+                       "action": {\n+                           "open_direct_link": "\u0622\u062f\u0631\u0633 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0628\u0631\u0627\u06cc \u0628\u0627\u0632 \u0634\u062f\u0646 \u0628\u0639\u062f \u0627\u0632 \u06a9\u0644\u06cc\u06a9"\n+                       },\n+                       "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646",\n+                       "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647"\n+                   },\n+                   {\n+                       "action": {\n+                           "open_server_link": {\n+                               "data": {\n+                                   "my_key_1": "value",\n+                                   "my_key_2": "value2"\n+                               }\n+                           }\n+                       },\n+                       "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646",\n+                       "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647"\n+                   }\n+               ]\n+           }\n+       ]\n+   },\n+   "receiver_buttons": {\n+       "rows": [\n+           {\n+               "buttons": [\n+                   {\n+                       "action": {\n+                           "open_direct_link": "\u0622\u062f\u0631\u0633 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0628\u0631\u0627\u06cc \u0628\u0627\u0632 \u0634\u062f\u0646 \u0628\u0639\u062f \u0627\u0632 \u06a9\u0644\u06cc\u06a9"\n+                       },\n+                       "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646",\n+                       "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647"\n+                   },\n+                   {\n+                       "action": {\n+                           "open_server_link": {\n+                               "data": {\n+                                   "my_key_1": "value",\n+                                   "my_key_2": "value2"\n+                               }\n+                           }\n+                       },\n+                       "icon_name": "\u0646\u0627\u0645 \u0622\u06cc\u06a9\u0648\u0646",\n+                       "caption": "\u0645\u062a\u0646 \u062f\u06a9\u0645\u0647"\n+                   }\n+               ]\n+           }\n+       ]\n+   }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u062e\u0648\u0627\u0646\u062f\u0646-\u062f\u0631-\u0644\u062d\u0638\u0647\u06cc-\u067e\u06cc\u0627\u0645\u0647\u0627\u06cc-\u06cc\u06a9-\u0622\u06af\u0647\u06cc",children:"\u062e\u0648\u0627\u0646\u062f\u0646 \u062f\u0631 \u0644\u062d\u0638\u0647\u200c\u06cc \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u06cc\u06a9 \u0622\u06af\u0647\u06cc"}),"\n",(0,s.jsx)(e.p,{children:"\u0627\u06cc\u0646 API \u0628\u0627 \u0627\u06cc\u0646 \u0646\u0633\u062e\u0647 \u0627\u0632 \u062f\u0627\u06a9\u060c depcrecate \u0634\u062f\u0647 \u0627\u0633\u062a \u0648 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0633\u0631\u0648\u06cc\u0633 \u06af\u0648\u0634 \u062f\u0627\u062f\u0646 \u0628\u0647 \u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627 \u0627\u0632 \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u062c\u062f\u06cc\u062f \u062f\u0631 \u0686\u062a \u06cc\u06a9 \u0622\u06af\u0647\u06cc (\u0627\u0632 \u0637\u0631\u0641 \u0622\u06af\u0647\u06cc \u06af\u0630\u0627\u0631) \u0622\u06af\u0627\u0647 \u0634\u0648\u06cc\u062f."}),"\n",(0,s.jsx)(e.p,{children:"\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u06af\u0648\u0634 \u062f\u0627\u062f\u0646 \u0628\u0647 \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u06cc\u06a9 \u0622\u06af\u0647\u06cc"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-diff",children:'- POST https://api.divar.ir/v1/open-platform/notify/chat/post-conversations\n+ POST https://api.divar.ir/v1/open-platform/events/subscriptions\nContent-Type: application/json\nx-api-key: {{apikey}}\nx-access-token: {{access_token}}\n\n{\n-   "post_token": "\u062a\u0648\u06a9\u0646 \u0622\u06af\u0647\u06cc",\n-   "endpoint": "\u0622\u062f\u0631\u0633\u06cc \u06a9\u0647 \u067e\u06cc\u0627\u0645\u200c\u0647\u0627 \u0628\u0647 \u0622\u0646 \u0641\u0631\u0633\u062a\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u0646\u062f",\n-   "identification_key": "\u06a9\u0644\u06cc\u062f \u0627\u062d\u0631\u0627\u0632 \u0645\u0646\u0628\u0639 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627"\n+   "event_type": "NEW_MESSAGE_ON_POST",\n+   "event_resource_id": "gZd7omnS",\n+   "meta_data": {\n+       "your_key": "your_value"\n+   }\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644\u06cc \u0627\u0632 \u0637\u0631\u0641 \u062f\u06cc\u0648\u0627\u0631\n\u0628\u0627 \u062a\u0648\u062c\u0647 \u0628\u0647 \u062a\u063a\u06cc\u06cc\u0631 \u06a9\u0627\u0645\u0644 \u0633\u0627\u062e\u062a\u0627\u0631 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644\u06cc \u0627\u0632 \u0637\u0631\u0641 \u062f\u06cc\u0648\u0627\u0631\u060c \u067e\u06cc\u0634\u0646\u0647\u0627\u062f \u0645\u06cc\u200c\u0634\u0648\u062f \u06a9\u0647 \u062f\u0627\u06a9 ",(0,s.jsx)(e.a,{href:"../events#%D8%AF%D8%B1%D8%AE%D9%88%D8%A7%D8%B3%D8%AA-%D8%B1%D9%88%DB%8C%D8%AF%D8%A7%D8%AF-%D8%AC%D8%AF%DB%8C%D8%AF-%D8%A7%D8%B1%D8%B3%D8%A7%D9%84%DB%8C-%D8%A7%D8%B2-%D8%B3%D9%85%D8%AA-%D8%AF%DB%8C%D9%88%D8%A7%D8%B1",children:"\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0631\u0648\u06cc\u062f\u0627\u062f \u062c\u062f\u06cc\u062f"})," \u0631\u0627 \u0645\u0637\u0627\u0644\u0639\u0647 \u06a9\u0646\u06cc\u062f."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-diff",children:'- POST {{ endpoint }}\n+ POST {{new_events_url}}\nContent-Type: application/json\n- authorization: {{ identification_key }}\n+ Authorization: {{identification_key}}\n\n{\n-   "payload": {\n-     "data": {\n-       "text": ""\n-     },\n-     "sender": {\n-       "id": "",\n-       "is_supply": bool\n-     },\n-     "id": "",\n-     "metadata": {\n-       "category": "",\n-       "post_token": "",\n-       "title": ""\n-     },\n-     "sent_at": "",\n-     "receiver": {\n-       "id": "",\n-       "is_supply": bool\n-     },\n-     "type": "TEXT"\n-   },\n-   "timestamp": "",\n-   "type": "CHAT_MESSAGE"\n+   "type": "NEW_MESSAGE",\n+   "meta_data": {\n+        "your_key": "your_value"\n+    },\n+   "new_message": {\n+       "id": "e7a08a2c-8ee4-11ef-af85-4e9e9bfa3c12",\n+       "conversation": {\n+           "id": "edbb9499-cccc-4d35-b21f-621fa95f2b3e",\n+           "type": "POST",\n+           "post_token": "gZd7omnS"\n+       },\n+       "sender": {\n+           "side": "SELLER",\n+           "type": "HUMAN"\n+       },\n+       "type": "TEXT",\n+       "sent_at": 1729429926140000\n+   }\n}\n'})})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function o(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);