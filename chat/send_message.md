# ุงุฑุณุงู ูพุงู ุฏุฑ ฺุช

ุจุฑูุงููโโูุง ฺฉูุงุฑ ุฏูุงุฑ ูโุชูุงููุฏ ูพุณ ุงุฒ ฺฉุณุจ ุงุฌุงุฒู ุงุฒ ฺฉุงุฑุจุฑุ ุฏุฑ [ฺฉ ฺุช][ุงุฑุณุงู ูพุงู ุฏุฑ ฺฉ ฺุช] ุง [ฺุชโูุง ฺฉ ุขฺฏู][ุงุฑุณุงู ูพุงู ุฏุฑ ฺุชโูุง ุขฺฏู] ูพุงู ุงุฑุณุงู ฺฉููุฏ.
ูพุงูโูุง ุงุฑุณุงู ุงุฒ ุทุฑู ฺฉุงุฑุจุฑ ฺฉู ุฏุณุชุฑุณ ุจู ุจุฑูุงูู ุฑุง ุฏุงุฏู ู ุฏุฑุฎูุงุณุช ุงุฒ ุณูุชุด ุจูุฏู ุฏุฑ ฺุช ุงุฑุณุงู ูโุดูุฏ ู ุฏุฑ ูุณูุช ุจุงูุง ูพุงู ุนููุงู ุจุฑูุงููู ููุฑุฏ ูุธุฑ ูุดุงู ุฏุงุฏู ูโุดูุฏ. ุจูุงุจุฑุงู ูุฑ ุฏู ุทุฑู ฺุช ูพุงู ุฑุง ูโุจููุฏ.

| ![ููุง ุงุฒ ฺฉ ูพุงู ุงุฑุณุงู ุดุฏู ุชูุณุท ุจุงุช](/img/bot-message.png) |
| :----------------------------------------------------------: |
|   <sub dir="rtl">ููุง ุงุฒ ฺฉ ูพุงู ุงุฑุณุงู ุดุฏู ุชูุณุท ุจุงุช</sub>   |

> โญ๏ธ ุจูุชุฑ ุงุณุช ูพุงู ฺฉู ุฏุฑ ฺุช ุงุฑุณุงู ูโฺฉูุฏ ุจุฑุง ูุฑ ุฏู ุทุฑู ูุนูุงุฏุงุฑ ุจุงุดุฏ ู ุงุทูุงุนุงุช ููุฏ ุฏุฑ ุฑุงุณุชุง ุฎุฏูุช ุฏุฑุงูุช ุดุฏู ุงุฑุงุฆู ุฏูุฏ.

> ๐ ุจุฑุง ููุงุตุฏ ุชุจูุบุงุช ุง ูุนุฑู ุงุฒ ุงู ุงูฺฉุงู ุงุณุชูุงุฏู ูฺฉูุฏ.

## ุงุฑุณุงู ูพุงู ุฏุฑ ฺฉ ฺุช

| CHAT SEND MESSAGE |                                    |
| ----------------- | ---------------------------------- |
| API Permissions   | CHAT_SEND_MESSAGE_OAUTH            |
| OAuth Permissions | CHAT_SEND_MESSAGE_OAUTH            |
| Resource ID       | BASE64(user_id:post_token:peer_id) |

ููููู ุจุฑุง ูพุงุฑุงูุชุฑูุง ุงุฑุณุงู

```
user_id = e9ba8a81-9583-4f7c-af54-b07df089d971
post_token = AZf3Uqr3
peer_id = 1697004f-e902-44c2-bbbe-bf8e20d54bff

resource_id = BASE64(e9ba8a81-9583-4f7c-af54-b07df089d971:AZf3Uqr3:1697004f-e902-44c2-bbbe-bf8e20d54bff) = ZTliYThhODEtOTU4My00ZjdjLWFmNTQtYjA3ZGYwODlkOTcxOkFaZjNVcXIzOjE2OTcwMDRmLWU5MDItNDRjMi1iYmJlLWJmOGUyMGQ1NGJmZg==

Scope:
CHAT_SEND_MESSAGE_OAUTH__ZTliYThhODEtOTU4My00ZjdjLWFmNTQtYjA3ZGYwODlkOTcxOkFaZjNVcXIzOjE2OTcwMDRmLWU5MDItNDRjMi1iYmJlLWJmOGUyMGQ1NGJmZg==
```

## ุงุฑุณุงู ูพุงู ุฏุฑ ฺุชโูุง ฺฉ ุขฺฏู

| CHAT SEND MESSAGE |                                      |
| ----------------- | ------------------------------------ |
| API Permissions   | CHAT_SEND_MESSAGE_OAUTH              |
| OAuth Permissions | CHAT_SEND_MESSAGE_POST_CONVERSATIONS |
| Resource ID       | post_token                           |

ูููููู ุฏุฑุฎูุงุณุช ุงุฑุณุงู ุจุฑุง ุงุฑุณุงู ูพุงู ุฏุฑ ฺฉ ฺุช ูุดุฎุต

```http request
POST https://api.divar.ir/v2/open-platform/chat/conversation
Content-Type: application/json
x-api-key: {{apikey}}
x-access-token: {{access_token}}

{
    "user_id": "ุดูุงุณูู ฺฉุงุฑุจุฑ ฺฉู ู ุฎูุงูู ูพุงู ุงุฒ ุณูุช ุงู ูุงุฑุฏ ฺุช ฺฉูู",
    "post_token": "ุชูฺฉู ุขฺฏู ููุฑุฏ ฺุช",
    "peer_id": "ุดูุงุณูู ุทุฑู ููุงุจู ุฏุฑ ฺุช",
    "type": "TEXT",
    "message": "ูุชู ูพุงู",
    "sender_btn": {
        "action": "LINK",
        "data": {
            "icon_name": "ูุงู ุขฺฉูู ููุฑุฏ ูุธุฑ ุจุฑุง ุงู ุฏฺฉูู",
            "extra_data": {
                "your_custom_key":"ุงุทูุงุนุงุช ฺฉู ุฏุฑ ุงุฏุงูู ููฺฏุงู ฺฉูฺฉ ุฑู ุฏฺฉูู ูุงุฒ ุฏุงุฑู"
            },
            "caption": "ูุชู ุฏฺฉููู ุฒุฑ ูพุงู ุจุฑุง ุทุฑู ูุฑุณุชูุฏู"
        }
    },
    "receiver_btn": {
        "action": "LINK",
        "data": {
            "icon_name": "ูุงู ุขฺฉูู ููุฑุฏ ูุธุฑ ุจุฑุง ุงู ุฏฺฉูู",
            "extra_data": {
                "your_custom_key":"ุงุทูุงุนุงุช ฺฉู ุฏุฑ ุงุฏุงูู ููฺฏุงู ฺฉูฺฉ ุฑู ุฏฺฉูู ูุงุฒ ุฏุงุฑู"
            },
            "caption": "ูุชู ุฏฺฉููู ุฒุฑ ูพุงู ุจุฑุง ุทุฑู ฺฏุฑูุฏู"
        }
    }
}
```

ูููููู ุฏุฑุฎูุงุณุช ุงุฑุณุงู ุจุฑุง ุงุฑุณุงู ูพุงู ุฏุฑ ฺฉ ฺุช ูุดุฎุต ุจุง ููฺฉ ูุณุชูู

```http request
POST https://api.divar.ir/v2/open-platform/chat/conversation
Content-Type: application/json
x-api-key: {{apikey}}
x-access-token: {{access_token}}

{
    "user_id": "ุดูุงุณูู ฺฉุงุฑุจุฑ ฺฉู ู ุฎูุงูู ูพุงู ุงุฒ ุณูุช ุงู ูุงุฑุฏ ฺุช ฺฉูู",
    "post_token": "ุชูฺฉู ุขฺฏู ููุฑุฏ ฺุช",
    "peer_id": "ุดูุงุณูู ุทุฑู ููุงุจู ุฏุฑ ฺุช",
    "type": "TEXT",
    "message": "ูุชู ูพุงู",
    "sender_btn": {
        "action": "DIRECT_LINK",
        "data": {
            "icon_name": "ูุงู ุขฺฉูู ููุฑุฏ ูุธุฑ ุจุฑุง ุงู ุฏฺฉูู",
            "direct_link": "ุขุฏุฑุณ ุตูุญูู ููุฑุฏ ูุธุฑ ุจุฑุง ุจุงุฒ ุดุฏู ููฺฏุงู ฺฉูฺฉ",
            "caption": "ูุชู ุฏฺฉููู ุฒุฑ ูพุงู ุจุฑุง ุทุฑู ูุฑุณุชูุฏู"
        }
    },
    "receiver_btn": {
        "action": "DIRECT_LINK",
        "data": {
            "icon_name": "ูุงู ุขฺฉูู ููุฑุฏ ูุธุฑ ุจุฑุง ุงู ุฏฺฉูู",
            "direct_link": "ุขุฏุฑุณ ุตูุญูู ููุฑุฏ ูุธุฑ ุจุฑุง ุจุงุฒ ุดุฏู ููฺฏุงู ฺฉูฺฉ",
            "caption": "ูุชู ุฏฺฉููู ุฒุฑ ูพุงู ุจุฑุง ุทุฑู ฺฏุฑูุฏู"
        }
    }
}
```

ูููููู ูพุงุณุฎ

```json
{
  "status": 200,
  "message": "success"
}
```

## ฺฉูฺฉ ฺฉุงุฑุจุฑ ุฑู ุฏฺฉููู ุฏุฑุฌ ุดุฏู ุฒุฑ ูพุงู

ุฏุฑ ุตูุฑุช ฺฉู ฺฉุงุฑุจุฑ ุฑู ุฏฺฉููโุง ฺฉู ุฒุฑ ูพุงู ุงุถุงูู ฺฉุฑุฏูโุงุฏ ฺฉูฺฉ ฺฉูุฏุ ุงุจุชุฏุง ุฏูุงุฑ ฺฉ ุฏุฑุฎูุงุณุช ุจู ุขุฏุฑุณ ฺฉู ุฏุฑ ุงุจุชุฏุง ุชูุธู ฺฉุฑุฏูโุงุฏ ูโุฒูุฏ. [ุชูุถุญุงุช ุจุดุชุฑ](/management#session-initialization-url/)

ุจู ููุฑุงู ุงู ุฏุฑุฎูุงุณุช ููุงุฑุฏ ุฒุฑ ุงุฑุณุงู ุฎูุงููุฏ ุดุฏ ู ุณูพุณ ฺฉุงุฑุจุฑ ุจู ุขุฏุฑุณ ฺฉู ุฏุฑ ุฏฺฉููู ููุฑุฏ ูุธุฑ ุฏุฑุฌ ุดุฏูโุงุณุช ูุฏุงุช ูโุดูุฏ.

ูููููู ูุญุชูุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุงุฒ ุณูุช ุฏูุงุฑ

```JSON
{
    "extra_data": {
        "provider_data": {"your_custom_key":"ุงุทูุงุนุงุช ฺฉู ุฏุฑ ุฏุฑุฎูุงุณุช ุงุฑุณุงู ูพุงู ุฏุฑ ูุฑุญููู ูุจู ูุฑุณุชุงุฏุฏ"},
        "location": {
            "latitude": 35.683374373999364,
            "longitude": 51.34850978851319
        }
    },
    "callback_url": "ุขุฏุฑุณ ฺฉู ฺฉุงุฑุจุฑ ูพุณ ุงุฒ ุงูุฌุงู ูุฑุงูุฏ ุฏุฑ ุณุฑูุณ ุดูุง ุจุงุฏ ุจู ุขู ูุฏุงุช ุดูุฏ",
    "post_token":   "ุชูฺฉู ุขฺฏู",
    "user_id":      "ุดูุงุณูู ฺฉุณ ฺฉู ุฑู ููฺฉ ฺฉูฺฉ ฺฉุฑุฏู ุง ูุฑุงูุฏ ุฑุง ุดุฑูุน ฺฉุฑุฏู",
    "peer_id":      "ุดูุงุณูู ุทุฑู ููุงุจู ฺุช",
    "Supplier": {
        "id": "ุดูุงุณูู ฺฉุงุฑุจุฑ ูุฑูุดูุฏู (ุตุงุญุจ ุขฺฏู)"
    },
    "demand": {
        "id": "ุดูุงุณูู ฺฉุงุฑุจุฑ ุฎุฑุฏุงุฑ"
    }
}

```

> ุฏุฑ ุตูุฑุช ฺฉู ูพุงู ุงุฒ ููุน ูููุนุช ูฺฉุงู ุจุงุดุฏ ุงุทูุงุนุงุช ูุฑุชุจุท ุจู ุขู ูููุนุช ุฏุฑ ููุฏุงุฑ `location` ูุฑุงุฑ ูโฺฏุฑุฏ.
> ุฏุฑ ูพุงุณุฎ ุจู ุงู ุฏุฑุฎูุงุณุช ุฏูุงุฑ ุดูุง ุจุงุฏ ฺูู ูพุงุณุฎ ุจู ุฏูุงุฑ ุจุฏูุฏ ุชุง ฺฉุงุฑุจุฑ ุจู ุขุฏุฑุณ ููุฑุฏ ูุธุฑ ุดูุง ูุฏุงุช ุดูุฏ.

```
{
"status": "http status code (200, 400, ...)",
"message": "string",
"url": "https://yourapp.com/divar/will/redirect/user/here"
}
```

ุจุฑุง ฺฏุฑูุชู ุดูุงุฑู ุชูุงุณ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุงุฒ [ุงุญุฑุงุฒ ุจุงุฒ](/oauth/) ู ุชูุถุญุงุช [ุฏุฑุฎูุงุณุช ุดูุงุฑู ุชูุงุณ](oauth/get_user.md) ุงุณุชูุงุฏู ฺฉูุฏ.

[ุงุฑุณุงู ูพุงู ุฏุฑ ฺฉ ฺุช]: #ุงุฑุณุงู-ูพุงู-ุฏุฑ-ฺฉ-ฺุช
[ุงุฑุณุงู ูพุงู ุฏุฑ ฺุชโูุง ุขฺฏู]: #ุงุฑุณุงู-ูพุงู-ุฏุฑ-ฺุชูุง-ฺฉ-ุขฺฏู

<br><br>

<div align="center">

<img src="/img/wire-puzzle-dark.svg#gh-dark-mode-only" height="156px"/>
<img src="/img/wire-puzzle-light.svg#gh-light-mode-only" height="156px"/>

</div>

<br><br>
